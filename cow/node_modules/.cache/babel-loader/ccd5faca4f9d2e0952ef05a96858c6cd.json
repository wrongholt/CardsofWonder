{"ast":null,"code":"/*!\r\n\tBy AndrÃ© Rinas, www.andrerinas.de\r\n\tDocumentation, www.simplelightbox.de\r\n\tAvailable for use under the MIT License\r\n\tVersion 2.10.3\r\n*/\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar SimpleLightbox = /*#__PURE__*/function () {\n  function SimpleLightbox(elements, options) {\n    var _this = this;\n\n    _classCallCheck(this, SimpleLightbox);\n\n    _defineProperty(this, \"defaultOptions\", {\n      sourceAttr: 'href',\n      overlay: true,\n      overlayOpacity: 0.7,\n      spinner: true,\n      nav: true,\n      navText: ['&lsaquo;', '&rsaquo;'],\n      captions: true,\n      captionDelay: 0,\n      captionSelector: 'img',\n      captionType: 'attr',\n      captionsData: 'title',\n      captionPosition: 'bottom',\n      captionClass: '',\n      close: true,\n      closeText: '&times;',\n      swipeClose: true,\n      showCounter: true,\n      fileExt: 'png|jpg|jpeg|gif|webp',\n      animationSlide: true,\n      animationSpeed: 250,\n      preloading: true,\n      enableKeyboard: true,\n      loop: true,\n      rel: false,\n      docClose: true,\n      swipeTolerance: 50,\n      className: 'simple-lightbox',\n      widthRatio: 0.8,\n      heightRatio: 0.9,\n      scaleImageToRatio: false,\n      disableRightClick: false,\n      disableScroll: true,\n      alertError: true,\n      alertErrorMessage: 'Image not found, next image will be loaded',\n      additionalHtml: false,\n      history: true,\n      throttleInterval: 0,\n      doubleTapZoom: 2,\n      maxZoom: 10,\n      htmlClass: 'has-lightbox',\n      rtl: false,\n      fixedClass: 'sl-fixed',\n      fadeSpeed: 300,\n      uniqueImages: true,\n      focus: true,\n      scrollZoom: true,\n      scrollZoomFactor: 0.5\n    });\n\n    _defineProperty(this, \"transitionPrefix\", void 0);\n\n    _defineProperty(this, \"isPassiveEventsSupported\", void 0);\n\n    _defineProperty(this, \"transitionCapable\", false);\n\n    _defineProperty(this, \"isTouchDevice\", 'ontouchstart' in window);\n\n    _defineProperty(this, \"isAppleDevice\", /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));\n\n    _defineProperty(this, \"initialLocationHash\", void 0);\n\n    _defineProperty(this, \"pushStateSupport\", 'pushState' in history);\n\n    _defineProperty(this, \"isOpen\", false);\n\n    _defineProperty(this, \"isAnimating\", false);\n\n    _defineProperty(this, \"isClosing\", false);\n\n    _defineProperty(this, \"isFadeIn\", false);\n\n    _defineProperty(this, \"urlChangedOnce\", false);\n\n    _defineProperty(this, \"hashReseted\", false);\n\n    _defineProperty(this, \"historyHasChanges\", false);\n\n    _defineProperty(this, \"historyUpdateTimeout\", null);\n\n    _defineProperty(this, \"currentImage\", void 0);\n\n    _defineProperty(this, \"eventNamespace\", 'simplelightbox');\n\n    _defineProperty(this, \"domNodes\", {});\n\n    _defineProperty(this, \"loadedImages\", []);\n\n    _defineProperty(this, \"initialImageIndex\", 0);\n\n    _defineProperty(this, \"currentImageIndex\", 0);\n\n    _defineProperty(this, \"initialSelector\", null);\n\n    _defineProperty(this, \"globalScrollbarWidth\", 0);\n\n    _defineProperty(this, \"controlCoordinates\", {\n      swipeDiff: 0,\n      swipeYDiff: 0,\n      swipeStart: 0,\n      swipeEnd: 0,\n      swipeYStart: 0,\n      swipeYEnd: 0,\n      mousedown: false,\n      imageLeft: 0,\n      zoomed: false,\n      containerHeight: 0,\n      containerWidth: 0,\n      containerOffsetX: 0,\n      containerOffsetY: 0,\n      imgHeight: 0,\n      imgWidth: 0,\n      capture: false,\n      initialOffsetX: 0,\n      initialOffsetY: 0,\n      initialPointerOffsetX: 0,\n      initialPointerOffsetY: 0,\n      initialPointerOffsetX2: 0,\n      initialPointerOffsetY2: 0,\n      initialScale: 1,\n      initialPinchDistance: 0,\n      pointerOffsetX: 0,\n      pointerOffsetY: 0,\n      pointerOffsetX2: 0,\n      pointerOffsetY2: 0,\n      targetOffsetX: 0,\n      targetOffsetY: 0,\n      targetScale: 0,\n      pinchOffsetX: 0,\n      pinchOffsetY: 0,\n      limitOffsetX: 0,\n      limitOffsetY: 0,\n      scaleDifference: 0,\n      targetPinchDistance: 0,\n      touchCount: 0,\n      doubleTapped: false,\n      touchmoveCount: 0\n    });\n\n    this.options = Object.assign(this.defaultOptions, options);\n    this.isPassiveEventsSupported = this.checkPassiveEventsSupport();\n\n    if (typeof elements === 'string') {\n      this.initialSelector = elements;\n      this.elements = Array.from(document.querySelectorAll(elements));\n    } else {\n      this.elements = typeof elements.length !== 'undefined' && elements.length > 0 ? Array.from(elements) : [elements];\n    }\n\n    this.relatedElements = [];\n    this.transitionPrefix = this.calculateTransitionPrefix();\n    this.transitionCapable = this.transitionPrefix !== false;\n    this.initialLocationHash = this.hash; // this should be handled by attribute selector IMHO! => 'a[rel=bla]'...\n\n    if (this.options.rel) {\n      this.elements = this.getRelated(this.options.rel);\n    }\n\n    if (this.options.uniqueImages) {\n      var imgArr = [];\n      this.elements = Array.from(this.elements).filter(function (element) {\n        var src = element.getAttribute(_this.options.sourceAttr);\n\n        if (imgArr.indexOf(src) === -1) {\n          imgArr.push(src);\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    this.createDomNodes();\n\n    if (this.options.close) {\n      this.domNodes.wrapper.appendChild(this.domNodes.closeButton);\n    }\n\n    if (this.options.nav) {\n      this.domNodes.wrapper.appendChild(this.domNodes.navigation);\n    }\n\n    if (this.options.spinner) {\n      this.domNodes.wrapper.appendChild(this.domNodes.spinner);\n    }\n\n    this.addEventListener(this.elements, 'click.' + this.eventNamespace, function (event) {\n      if (_this.isValidLink(event.currentTarget)) {\n        event.preventDefault();\n\n        if (_this.isAnimating) {\n          return false;\n        }\n\n        _this.initialImageIndex = _this.elements.indexOf(event.currentTarget);\n\n        _this.openImage(event.currentTarget);\n      }\n    }); // close addEventListener click addEventListener doc\n\n    if (this.options.docClose) {\n      this.addEventListener(this.domNodes.wrapper, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], function (event) {\n        if (_this.isOpen && event.target === event.currentTarget) {\n          _this.close();\n        }\n      });\n    } // disable rightclick\n\n\n    if (this.options.disableRightClick) {\n      this.addEventListener(document.body, 'contextmenu.' + this.eventNamespace, function (event) {\n        if (event.target.parentElement.classList.contains(\"sl-image\")) {\n          event.preventDefault();\n        }\n      });\n    } // keyboard-control\n\n\n    if (this.options.enableKeyboard) {\n      this.addEventListener(document.body, 'keyup.' + this.eventNamespace, this.throttle(function (event) {\n        _this.controlCoordinates.swipeDiff = 0; // keyboard control only if lightbox is open\n\n        if (_this.isAnimating && event.key === 'Escape') {\n          _this.currentImage.setAttribute('src', '');\n\n          _this.isAnimating = false;\n          return _this.close();\n        }\n\n        if (_this.isOpen) {\n          event.preventDefault();\n\n          if (event.key === 'Escape') {\n            _this.close();\n          }\n\n          if (!_this.isAnimating && ['ArrowLeft', 'ArrowRight'].indexOf(event.key) > -1) {\n            _this.loadImage(event.key === 'ArrowRight' ? 1 : -1);\n          }\n        }\n      }, this.options.throttleInterval));\n    }\n\n    this.addEvents();\n  }\n\n  _createClass(SimpleLightbox, [{\n    key: \"checkPassiveEventsSupport\",\n    value: function checkPassiveEventsSupport() {\n      // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n      // Test via a getter in the options object to see if the passive property is accessed\n      var supportsPassive = false;\n\n      try {\n        var opts = Object.defineProperty({}, 'passive', {\n          get: function get() {\n            supportsPassive = true;\n          }\n        });\n        window.addEventListener(\"testPassive\", null, opts);\n        window.removeEventListener(\"testPassive\", null, opts);\n      } catch (e) {}\n\n      return supportsPassive;\n    }\n  }, {\n    key: \"createDomNodes\",\n    value: function createDomNodes() {\n      this.domNodes.overlay = document.createElement('div');\n      this.domNodes.overlay.classList.add('sl-overlay');\n      this.domNodes.overlay.dataset.opacityTarget = this.options.overlayOpacity;\n      this.domNodes.closeButton = document.createElement('button');\n      this.domNodes.closeButton.classList.add('sl-close');\n      this.domNodes.closeButton.innerHTML = this.options.closeText;\n      this.domNodes.spinner = document.createElement('div');\n      this.domNodes.spinner.classList.add('sl-spinner');\n      this.domNodes.spinner.innerHTML = '<div></div>';\n      this.domNodes.navigation = document.createElement('div');\n      this.domNodes.navigation.classList.add('sl-navigation');\n      this.domNodes.navigation.innerHTML = \"<button class=\\\"sl-prev\\\">\".concat(this.options.navText[0], \"</button><button class=\\\"sl-next\\\">\").concat(this.options.navText[1], \"</button>\");\n      this.domNodes.counter = document.createElement('div');\n      this.domNodes.counter.classList.add('sl-counter');\n      this.domNodes.counter.innerHTML = '<span class=\"sl-current\"></span>/<span class=\"sl-total\"></span>';\n      this.domNodes.caption = document.createElement('div');\n      this.domNodes.caption.classList.add('sl-caption', 'pos-' + this.options.captionPosition);\n\n      if (this.options.captionClass) {\n        this.domNodes.caption.classList.add(this.options.captionClass);\n      }\n\n      this.domNodes.image = document.createElement('div');\n      this.domNodes.image.classList.add('sl-image');\n      this.domNodes.wrapper = document.createElement('div');\n      this.domNodes.wrapper.classList.add('sl-wrapper');\n      this.domNodes.wrapper.setAttribute('tabindex', -1);\n      this.domNodes.wrapper.setAttribute('role', 'dialog');\n      this.domNodes.wrapper.setAttribute('aria-hidden', false);\n\n      if (this.options.className) {\n        this.domNodes.wrapper.classList.add(this.options.className);\n      }\n\n      if (this.options.rtl) {\n        this.domNodes.wrapper.classList.add('sl-dir-rtl');\n      }\n    }\n  }, {\n    key: \"throttle\",\n    value: function throttle(func, limit) {\n      var inThrottle;\n      return function () {\n        if (!inThrottle) {\n          func.apply(this, arguments);\n          inThrottle = true;\n          setTimeout(function () {\n            return inThrottle = false;\n          }, limit);\n        }\n      };\n    }\n  }, {\n    key: \"isValidLink\",\n    value: function isValidLink(element) {\n      return !this.options.fileExt || element.getAttribute(this.options.sourceAttr) && new RegExp('(' + this.options.fileExt + ')$', 'i').test(element.getAttribute(this.options.sourceAttr));\n    }\n  }, {\n    key: \"calculateTransitionPrefix\",\n    value: function calculateTransitionPrefix() {\n      var s = (document.body || document.documentElement).style;\n      return 'transition' in s ? '' : 'WebkitTransition' in s ? '-webkit-' : 'MozTransition' in s ? '-moz-' : 'OTransition' in s ? '-o' : false;\n    }\n  }, {\n    key: \"toggleScrollbar\",\n    value: function toggleScrollbar(type) {\n      var scrollbarWidth = 0;\n      var fixedElements = [].slice.call(document.querySelectorAll('.' + this.options.fixedClass));\n\n      if (type === 'hide') {\n        var fullWindowWidth = window.innerWidth;\n\n        if (!fullWindowWidth) {\n          var documentElementRect = document.documentElement.getBoundingClientRect();\n          fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\n        }\n\n        if (document.body.clientWidth < fullWindowWidth || this.isAppleDevice) {\n          var scrollDiv = document.createElement('div'),\n              paddingRight = parseInt(document.body.style.paddingRight || 0, 10);\n          scrollDiv.classList.add('sl-scrollbar-measure');\n          document.body.appendChild(scrollDiv);\n          scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n          document.body.removeChild(scrollDiv);\n          document.body.dataset.originalPaddingRight = paddingRight;\n\n          if (scrollbarWidth > 0 || scrollbarWidth == 0 && this.isAppleDevice) {\n            document.body.classList.add('hidden-scroll');\n            document.body.style.paddingRight = paddingRight + scrollbarWidth + 'px';\n            fixedElements.forEach(function (element) {\n              var actualPadding = element.style.paddingRight;\n              var calculatedPadding = window.getComputedStyle(element)['padding-right'];\n              element.dataset.originalPaddingRight = actualPadding;\n              element.style.paddingRight = \"\".concat(parseFloat(calculatedPadding) + scrollbarWidth, \"px\");\n            });\n          }\n        }\n      } else {\n        document.body.classList.remove('hidden-scroll');\n        document.body.style.paddingRight = document.body.dataset.originalPaddingRight;\n        fixedElements.forEach(function (element) {\n          var padding = element.dataset.originalPaddingRight;\n\n          if (typeof padding !== 'undefined') {\n            element.style.paddingRight = padding;\n          }\n        });\n      }\n\n      return scrollbarWidth;\n    }\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this2 = this;\n\n      if (!this.isOpen || this.isAnimating || this.isClosing) {\n        return false;\n      }\n\n      this.isClosing = true;\n      var element = this.relatedElements[this.currentImageIndex];\n      element.dispatchEvent(new Event('close.simplelightbox'));\n\n      if (this.options.history) {\n        this.historyHasChanges = false;\n\n        if (!this.hashReseted) {\n          this.resetHash();\n        }\n      }\n\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n      this.fadeOut(this.domNodes.overlay, this.options.fadeSpeed);\n      this.fadeOut(document.querySelectorAll('.sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter'), this.options.fadeSpeed, function () {\n        if (_this2.options.disableScroll) {\n          _this2.toggleScrollbar('show');\n        }\n\n        if (_this2.options.htmlClass && _this2.options.htmlClass !== '') {\n          document.querySelector('html').classList.remove(_this2.options.htmlClass);\n        }\n\n        document.body.removeChild(_this2.domNodes.wrapper);\n        document.body.removeChild(_this2.domNodes.overlay);\n        _this2.domNodes.additionalHtml = null;\n        element.dispatchEvent(new Event('closed.simplelightbox'));\n        _this2.isClosing = false;\n      });\n      this.currentImage = null;\n      this.isOpen = false;\n      this.isAnimating = false; // reset touchcontrol coordinates\n\n      for (var key in this.controlCoordinates) {\n        this.controlCoordinates[key] = 0;\n      }\n\n      this.controlCoordinates.mousedown = false;\n      this.controlCoordinates.zoomed = false;\n      this.controlCoordinates.capture = false;\n      this.controlCoordinates.initialScale = this.minMax(1, 1, this.options.maxZoom);\n      this.controlCoordinates.doubleTapped = false;\n    }\n  }, {\n    key: \"hash\",\n    get: function get() {\n      return window.location.hash.substring(1);\n    }\n  }, {\n    key: \"preload\",\n    value: function preload() {\n      var _this3 = this;\n\n      var index = this.currentImageIndex,\n          length = this.relatedElements.length,\n          next = index + 1 < 0 ? length - 1 : index + 1 >= length - 1 ? 0 : index + 1,\n          prev = index - 1 < 0 ? length - 1 : index - 1 >= length - 1 ? 0 : index - 1,\n          nextImage = new Image(),\n          prevImage = new Image();\n      nextImage.addEventListener('load', function (event) {\n        var src = event.target.getAttribute('src');\n\n        if (_this3.loadedImages.indexOf(src) === -1) {\n          //is this condition even required... setting multiple times will not change usage...\n          _this3.loadedImages.push(src);\n        }\n\n        _this3.relatedElements[index].dispatchEvent(new Event('nextImageLoaded.' + _this3.eventNamespace));\n      });\n      nextImage.setAttribute('src', this.relatedElements[next].getAttribute(this.options.sourceAttr));\n      prevImage.addEventListener('load', function (event) {\n        var src = event.target.getAttribute('src');\n\n        if (_this3.loadedImages.indexOf(src) === -1) {\n          _this3.loadedImages.push(src);\n        }\n\n        _this3.relatedElements[index].dispatchEvent(new Event('prevImageLoaded.' + _this3.eventNamespace));\n      });\n      prevImage.setAttribute('src', this.relatedElements[prev].getAttribute(this.options.sourceAttr));\n    }\n  }, {\n    key: \"loadImage\",\n    value: function loadImage(direction) {\n      var _this4 = this;\n\n      var slideDirection = direction;\n\n      if (this.options.rtl) {\n        direction = -direction;\n      }\n\n      this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('change.' + this.eventNamespace));\n      this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'next' : 'prev') + '.' + this.eventNamespace));\n      var newIndex = this.currentImageIndex + direction;\n\n      if (this.isAnimating || (newIndex < 0 || newIndex >= this.relatedElements.length) && this.options.loop === false) {\n        return false;\n      }\n\n      this.currentImageIndex = newIndex < 0 ? this.relatedElements.length - 1 : newIndex > this.relatedElements.length - 1 ? 0 : newIndex;\n      this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\n\n      if (this.options.animationSlide) {\n        this.slide(this.options.animationSpeed / 1000, -100 * slideDirection - this.controlCoordinates.swipeDiff + 'px');\n      }\n\n      this.fadeOut(this.domNodes.image, this.options.fadeSpeed, function () {\n        _this4.isAnimating = true;\n\n        if (!_this4.isClosing) {\n          setTimeout(function () {\n            var element = _this4.relatedElements[_this4.currentImageIndex];\n\n            _this4.currentImage.setAttribute('src', element.getAttribute(_this4.options.sourceAttr));\n\n            if (_this4.loadedImages.indexOf(element.getAttribute(_this4.options.sourceAttr)) === -1) {\n              _this4.show(_this4.domNodes.spinner);\n            }\n\n            if (_this4.domNodes.image.contains(_this4.domNodes.caption)) {\n              _this4.domNodes.image.removeChild(_this4.domNodes.caption);\n            }\n\n            _this4.adjustImage(slideDirection);\n\n            if (_this4.options.preloading) _this4.preload();\n          }, 100);\n        } else {\n          _this4.isAnimating = false;\n        }\n      });\n    }\n  }, {\n    key: \"adjustImage\",\n    value: function adjustImage(direction) {\n      var _this5 = this;\n\n      if (!this.currentImage) {\n        return false;\n      }\n\n      var tmpImage = new Image(),\n          windowWidth = window.innerWidth * this.options.widthRatio,\n          windowHeight = window.innerHeight * this.options.heightRatio;\n      tmpImage.setAttribute('src', this.currentImage.getAttribute('src'));\n      this.currentImage.dataset.scale = 1;\n      this.currentImage.dataset.translateX = 0;\n      this.currentImage.dataset.translateY = 0;\n      this.zoomPanElement(0, 0, 1);\n      tmpImage.addEventListener('error', function (event) {\n        _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('error.' + _this5.eventNamespace));\n\n        _this5.isAnimating = false;\n        _this5.isOpen = true;\n        _this5.domNodes.spinner.style.display = 'none';\n        var dirIsDefined = direction === 1 || direction === -1;\n\n        if (_this5.initialImageIndex === _this5.currentImageIndex && dirIsDefined) {\n          return _this5.close();\n        }\n\n        if (_this5.options.alertError) {\n          alert(_this5.options.alertErrorMessage);\n        }\n\n        _this5.loadImage(dirIsDefined ? direction : 1);\n      });\n      tmpImage.addEventListener('load', function (event) {\n        if (typeof direction !== 'undefined') {\n          _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('changed.' + _this5.eventNamespace));\n\n          _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'nextDone' : 'prevDone') + '.' + _this5.eventNamespace));\n        } // history\n\n\n        if (_this5.options.history) {\n          _this5.updateURL();\n        }\n\n        if (_this5.loadedImages.indexOf(_this5.currentImage.getAttribute('src')) === -1) {\n          _this5.loadedImages.push(_this5.currentImage.getAttribute('src'));\n        }\n\n        var imageWidth = event.target.width,\n            imageHeight = event.target.height;\n\n        if (_this5.options.scaleImageToRatio || imageWidth > windowWidth || imageHeight > windowHeight) {\n          var ratio = imageWidth / imageHeight > windowWidth / windowHeight ? imageWidth / windowWidth : imageHeight / windowHeight;\n          imageWidth /= ratio;\n          imageHeight /= ratio;\n        }\n\n        _this5.domNodes.image.style.top = (window.innerHeight - imageHeight) / 2 + 'px';\n        _this5.domNodes.image.style.left = (window.innerWidth - imageWidth - _this5.globalScrollbarWidth) / 2 + 'px';\n        _this5.domNodes.image.style.width = imageWidth + 'px';\n        _this5.domNodes.image.style.height = imageHeight + 'px';\n        _this5.domNodes.spinner.style.display = 'none';\n\n        if (_this5.options.focus) {\n          _this5.forceFocus();\n        }\n\n        _this5.fadeIn(_this5.currentImage, _this5.options.fadeSpeed, function () {\n          if (_this5.options.focus) {\n            _this5.domNodes.wrapper.focus();\n          }\n        });\n\n        _this5.isOpen = true;\n        var captionContainer, captionText;\n\n        if (typeof _this5.options.captionSelector === 'string') {\n          captionContainer = _this5.options.captionSelector === 'self' ? _this5.relatedElements[_this5.currentImageIndex] : _this5.relatedElements[_this5.currentImageIndex].querySelector(_this5.options.captionSelector);\n        } else if (typeof _this5.options.captionSelector === 'function') {\n          captionContainer = _this5.options.captionSelector(_this5.relatedElements[_this5.currentImageIndex]);\n        }\n\n        if (_this5.options.captions && captionContainer) {\n          if (_this5.options.captionType === 'data') {\n            captionText = captionContainer.dataset[_this5.options.captionsData];\n          } else if (_this5.options.captionType === 'text') {\n            captionText = captionContainer.innerHTML;\n          } else {\n            captionText = captionContainer.getAttribute(_this5.options.captionsData);\n          }\n        }\n\n        if (!_this5.options.loop) {\n          if (_this5.currentImageIndex === 0) {\n            _this5.hide(_this5.domNodes.navigation.querySelector('.sl-prev'));\n          }\n\n          if (_this5.currentImageIndex >= _this5.relatedElements.length - 1) {\n            _this5.hide(_this5.domNodes.navigation.querySelector('.sl-next'));\n          }\n\n          if (_this5.currentImageIndex > 0) {\n            _this5.show(_this5.domNodes.navigation.querySelector('.sl-prev'));\n          }\n\n          if (_this5.currentImageIndex < _this5.relatedElements.length - 1) {\n            _this5.show(_this5.domNodes.navigation.querySelector('.sl-next'));\n          }\n        } else {\n          if (_this5.relatedElements.length === 1) {\n            _this5.hide(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\n          } else {\n            _this5.show(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\n          }\n        }\n\n        if (direction === 1 || direction === -1) {\n          if (_this5.options.animationSlide) {\n            _this5.slide(0, 100 * direction + 'px');\n\n            setTimeout(function () {\n              _this5.slide(_this5.options.animationSpeed / 1000, 0 + 'px');\n            }, 50);\n          }\n\n          _this5.fadeIn(_this5.domNodes.image, _this5.options.fadeSpeed, function () {\n            _this5.isAnimating = false;\n\n            _this5.setCaption(captionText, imageWidth);\n          });\n        } else {\n          _this5.isAnimating = false;\n\n          _this5.setCaption(captionText, imageWidth);\n        }\n\n        if (_this5.options.additionalHtml && !_this5.domNodes.additionalHtml) {\n          _this5.domNodes.additionalHtml = document.createElement('div');\n\n          _this5.domNodes.additionalHtml.classList.add('sl-additional-html');\n\n          _this5.domNodes.additionalHtml.innerHTML = _this5.options.additionalHtml;\n\n          _this5.domNodes.image.appendChild(_this5.domNodes.additionalHtml);\n        }\n      });\n    }\n  }, {\n    key: \"zoomPanElement\",\n    value: function zoomPanElement(targetOffsetX, targetOffsetY, targetScale) {\n      this.currentImage.style[this.transitionPrefix + 'transform'] = 'translate(' + targetOffsetX + ',' + targetOffsetY + ') scale(' + targetScale + ')';\n    }\n  }, {\n    key: \"minMax\",\n    value: function minMax(value, min, max) {\n      return value < min ? min : value > max ? max : value;\n    }\n  }, {\n    key: \"setZoomData\",\n    value: function setZoomData(initialScale, targetOffsetX, targetOffsetY) {\n      this.currentImage.dataset.scale = initialScale;\n      this.currentImage.dataset.translateX = targetOffsetX;\n      this.currentImage.dataset.translateY = targetOffsetY;\n    }\n  }, {\n    key: \"hashchangeHandler\",\n    value: function hashchangeHandler() {\n      if (this.isOpen && this.hash === this.initialLocationHash) {\n        this.hashReseted = true;\n        this.close();\n      }\n    }\n  }, {\n    key: \"addEvents\",\n    value: function addEvents() {\n      var _this6 = this; // resize/responsive\n\n\n      this.addEventListener(window, 'resize.' + this.eventNamespace, function (event) {\n        //this.adjustImage.bind(this)\n        if (_this6.isOpen) {\n          _this6.adjustImage();\n        }\n      });\n      this.addEventListener(this.domNodes.closeButton, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], this.close.bind(this));\n\n      if (this.options.history) {\n        setTimeout(function () {\n          _this6.addEventListener(window, 'hashchange.' + _this6.eventNamespace, function (event) {\n            if (_this6.isOpen) {\n              _this6.hashchangeHandler();\n            }\n          });\n        }, 40);\n      }\n\n      this.addEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace, function (event) {\n        if (!event.currentTarget.tagName.match(/button/i)) {\n          return true;\n        }\n\n        event.preventDefault();\n        _this6.controlCoordinates.swipeDiff = 0;\n\n        _this6.loadImage(event.currentTarget.classList.contains('sl-next') ? 1 : -1);\n      });\n\n      if (this.options.scrollZoom) {\n        var scale = 1;\n        this.addEventListener(this.domNodes.image, ['mousewheel', 'DOMMouseScroll'], function (event) {\n          if (_this6.controlCoordinates.mousedown || _this6.isAnimating || _this6.isClosing || !_this6.isOpen) {\n            return true;\n          }\n\n          if (_this6.controlCoordinates.containerHeight == 0) {\n            _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\n            _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\n            _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\n            _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\n            _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\n            _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\n            _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\n            _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\n          }\n\n          event.preventDefault();\n          var delta = event.delta || event.wheelDelta;\n\n          if (delta === undefined) {\n            //we are on firefox\n            delta = event.detail;\n          }\n\n          delta = Math.max(-1, Math.min(1, delta)); // cap the delta to [-1,1] for cross browser consistency\n          // apply zoom\n\n          scale += delta * _this6.options.scrollZoomFactor * scale;\n          scale = Math.max(1, Math.min(_this6.options.maxZoom, scale));\n          _this6.controlCoordinates.targetScale = scale;\n          var scrollTopPos = document.documentElement.scrollTop || document.body.scrollTop;\n          _this6.controlCoordinates.pinchOffsetX = event.pageX;\n          _this6.controlCoordinates.pinchOffsetY = event.pageY - scrollTopPos || 0; // need to substract the scroll position\n\n          _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\n          _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\n          _this6.controlCoordinates.scaleDifference = _this6.controlCoordinates.targetScale - _this6.controlCoordinates.initialScale;\n          _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetX - (_this6.controlCoordinates.pinchOffsetX - _this6.controlCoordinates.containerOffsetX - _this6.controlCoordinates.containerWidth / 2 - _this6.controlCoordinates.initialOffsetX) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\n          _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetY - (_this6.controlCoordinates.pinchOffsetY - _this6.controlCoordinates.containerOffsetY - _this6.controlCoordinates.containerHeight / 2 - _this6.controlCoordinates.initialOffsetY) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\n\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\n\n          if (_this6.controlCoordinates.targetScale > 1) {\n            _this6.controlCoordinates.zoomed = true;\n\n            if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\n              _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\n            }\n          } else {\n            if (_this6.controlCoordinates.initialScale === 1) {\n              _this6.controlCoordinates.zoomed = false;\n\n              if (_this6.domNodes.caption.style.display === 'none') {\n                _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\n              }\n            }\n\n            _this6.controlCoordinates.initialPinchDistance = null;\n            _this6.controlCoordinates.capture = false;\n          }\n\n          _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\n          _this6.controlCoordinates.initialScale = _this6.controlCoordinates.targetScale;\n          _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\n          _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\n\n          _this6.setZoomData(_this6.controlCoordinates.targetScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\n\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\n        });\n      }\n\n      this.addEventListener(this.domNodes.image, ['touchstart.' + this.eventNamespace, 'mousedown.' + this.eventNamespace], function (event) {\n        if (event.target.tagName === 'A' && event.type === 'touchstart') {\n          return true;\n        }\n\n        if (event.type === 'mousedown') {\n          event.preventDefault();\n          _this6.controlCoordinates.initialPointerOffsetX = event.clientX;\n          _this6.controlCoordinates.initialPointerOffsetY = event.clientY;\n          _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\n          _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\n          _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\n          _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\n          _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\n          _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\n          _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\n          _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\n          _this6.controlCoordinates.capture = true;\n        } else {\n          _this6.controlCoordinates.touchCount = event.touches.length;\n          _this6.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\n          _this6.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\n          _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\n          _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\n          _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\n          _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\n          _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\n          _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\n\n          if (_this6.controlCoordinates.touchCount === 1)\n            /* Single touch */\n            {\n              if (!_this6.controlCoordinates.doubleTapped) {\n                _this6.controlCoordinates.doubleTapped = true;\n                setTimeout(function () {\n                  _this6.controlCoordinates.doubleTapped = false;\n                }, 300);\n              } else {\n                _this6.currentImage.classList.add('sl-transition');\n\n                if (!_this6.controlCoordinates.zoomed) {\n                  _this6.controlCoordinates.initialScale = _this6.options.doubleTapZoom;\n\n                  _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\n\n                  _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\n\n                  if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\n                    _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\n                  }\n\n                  _this6.controlCoordinates.zoomed = true;\n                } else {\n                  _this6.controlCoordinates.initialScale = 1;\n\n                  _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\n\n                  _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\n\n                  _this6.controlCoordinates.zoomed = false;\n                }\n\n                setTimeout(function () {\n                  if (_this6.currentImage) {\n                    _this6.currentImage.classList.remove('sl-transition');\n                  }\n                }, 200);\n                return false;\n              }\n\n              _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\n              _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\n            } else if (_this6.controlCoordinates.touchCount === 2)\n            /* Pinch */\n            {\n              _this6.controlCoordinates.initialPointerOffsetX2 = event.touches[1].clientX;\n              _this6.controlCoordinates.initialPointerOffsetY2 = event.touches[1].clientY;\n              _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\n              _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\n              _this6.controlCoordinates.pinchOffsetX = (_this6.controlCoordinates.initialPointerOffsetX + _this6.controlCoordinates.initialPointerOffsetX2) / 2;\n              _this6.controlCoordinates.pinchOffsetY = (_this6.controlCoordinates.initialPointerOffsetY + _this6.controlCoordinates.initialPointerOffsetY2) / 2;\n              _this6.controlCoordinates.initialPinchDistance = Math.sqrt((_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialPointerOffsetX2) * (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialPointerOffsetX2) + (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialPointerOffsetY2) * (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialPointerOffsetY2));\n            }\n\n          _this6.controlCoordinates.capture = true;\n        }\n\n        if (_this6.controlCoordinates.mousedown) return true;\n\n        if (_this6.transitionCapable) {\n          _this6.controlCoordinates.imageLeft = parseInt(_this6.domNodes.image.style.left, 10);\n        }\n\n        _this6.controlCoordinates.mousedown = true;\n        _this6.controlCoordinates.swipeDiff = 0;\n        _this6.controlCoordinates.swipeYDiff = 0;\n        _this6.controlCoordinates.swipeStart = event.pageX || event.touches[0].pageX;\n        _this6.controlCoordinates.swipeYStart = event.pageY || event.touches[0].pageY;\n        return false;\n      });\n      this.addEventListener(this.domNodes.image, ['touchmove.' + this.eventNamespace, 'mousemove.' + this.eventNamespace, 'MSPointerMove'], function (event) {\n        if (!_this6.controlCoordinates.mousedown) {\n          return true;\n        }\n\n        if (event.type === 'touchmove') {\n          if (_this6.controlCoordinates.capture === false) {\n            return false;\n          }\n\n          _this6.controlCoordinates.pointerOffsetX = event.touches[0].clientX;\n          _this6.controlCoordinates.pointerOffsetY = event.touches[0].clientY;\n          _this6.controlCoordinates.touchCount = event.touches.length;\n          _this6.controlCoordinates.touchmoveCount++;\n\n          if (_this6.controlCoordinates.touchCount > 1)\n            /* Pinch */\n            {\n              _this6.controlCoordinates.pointerOffsetX2 = event.touches[1].clientX;\n              _this6.controlCoordinates.pointerOffsetY2 = event.touches[1].clientY;\n              _this6.controlCoordinates.targetPinchDistance = Math.sqrt((_this6.controlCoordinates.pointerOffsetX - _this6.controlCoordinates.pointerOffsetX2) * (_this6.controlCoordinates.pointerOffsetX - _this6.controlCoordinates.pointerOffsetX2) + (_this6.controlCoordinates.pointerOffsetY - _this6.controlCoordinates.pointerOffsetY2) * (_this6.controlCoordinates.pointerOffsetY - _this6.controlCoordinates.pointerOffsetY2));\n\n              if (_this6.controlCoordinates.initialPinchDistance === null) {\n                _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\n              }\n\n              if (Math.abs(_this6.controlCoordinates.initialPinchDistance - _this6.controlCoordinates.targetPinchDistance) >= 1) {\n                /* Initialize helpers */\n                _this6.controlCoordinates.targetScale = _this6.minMax(_this6.controlCoordinates.targetPinchDistance / _this6.controlCoordinates.initialPinchDistance * _this6.controlCoordinates.initialScale, 1, _this6.options.maxZoom);\n                _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\n                _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\n                _this6.controlCoordinates.scaleDifference = _this6.controlCoordinates.targetScale - _this6.controlCoordinates.initialScale;\n                _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetX - (_this6.controlCoordinates.pinchOffsetX - _this6.controlCoordinates.containerOffsetX - _this6.controlCoordinates.containerWidth / 2 - _this6.controlCoordinates.initialOffsetX) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\n                _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetY - (_this6.controlCoordinates.pinchOffsetY - _this6.controlCoordinates.containerOffsetY - _this6.controlCoordinates.containerHeight / 2 - _this6.controlCoordinates.initialOffsetY) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\n\n                _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\n\n                if (_this6.controlCoordinates.targetScale > 1) {\n                  _this6.controlCoordinates.zoomed = true;\n\n                  if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\n                    _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\n                  }\n                }\n\n                _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\n                _this6.controlCoordinates.initialScale = _this6.controlCoordinates.targetScale;\n                _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\n                _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\n              }\n            } else {\n            _this6.controlCoordinates.targetScale = _this6.controlCoordinates.initialScale;\n            _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\n            _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\n            _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetX - (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialOffsetX), _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\n            _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetY - (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialOffsetY), _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\n\n            if (Math.abs(_this6.controlCoordinates.targetOffsetX) === Math.abs(_this6.controlCoordinates.limitOffsetX)) {\n              _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\n              _this6.controlCoordinates.initialPointerOffsetX = _this6.controlCoordinates.pointerOffsetX;\n            }\n\n            if (Math.abs(_this6.controlCoordinates.targetOffsetY) === Math.abs(_this6.controlCoordinates.limitOffsetY)) {\n              _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\n              _this6.controlCoordinates.initialPointerOffsetY = _this6.controlCoordinates.pointerOffsetY;\n            }\n\n            _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\n\n            _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\n          }\n        }\n        /* Mouse Move implementation */\n\n\n        if (event.type === 'mousemove' && _this6.controlCoordinates.mousedown) {\n          if (event.type == 'touchmove') return true;\n          event.preventDefault();\n          if (_this6.controlCoordinates.capture === false) return false;\n          _this6.controlCoordinates.pointerOffsetX = event.clientX;\n          _this6.controlCoordinates.pointerOffsetY = event.clientY;\n          _this6.controlCoordinates.targetScale = _this6.controlCoordinates.initialScale;\n          _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\n          _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\n          _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetX - (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialOffsetX), _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\n          _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetY - (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialOffsetY), _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\n\n          if (Math.abs(_this6.controlCoordinates.targetOffsetX) === Math.abs(_this6.controlCoordinates.limitOffsetX)) {\n            _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\n            _this6.controlCoordinates.initialPointerOffsetX = _this6.controlCoordinates.pointerOffsetX;\n          }\n\n          if (Math.abs(_this6.controlCoordinates.targetOffsetY) === Math.abs(_this6.controlCoordinates.limitOffsetY)) {\n            _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\n            _this6.controlCoordinates.initialPointerOffsetY = _this6.controlCoordinates.pointerOffsetY;\n          }\n\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\n\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\n        }\n\n        if (!_this6.controlCoordinates.zoomed) {\n          _this6.controlCoordinates.swipeEnd = event.pageX || event.touches[0].pageX;\n          _this6.controlCoordinates.swipeYEnd = event.pageY || event.touches[0].pageY;\n          _this6.controlCoordinates.swipeDiff = _this6.controlCoordinates.swipeStart - _this6.controlCoordinates.swipeEnd;\n          _this6.controlCoordinates.swipeYDiff = _this6.controlCoordinates.swipeYStart - _this6.controlCoordinates.swipeYEnd;\n\n          if (_this6.options.animationSlide) {\n            _this6.slide(0, -_this6.controlCoordinates.swipeDiff + 'px');\n          }\n        }\n      });\n      this.addEventListener(this.domNodes.image, ['touchend.' + this.eventNamespace, 'mouseup.' + this.eventNamespace, 'touchcancel.' + this.eventNamespace, 'mouseleave.' + this.eventNamespace, 'pointerup', 'pointercancel', 'MSPointerUp', 'MSPointerCancel'], function (event) {\n        if (_this6.isTouchDevice && event.type === 'touchend') {\n          _this6.controlCoordinates.touchCount = event.touches.length;\n\n          if (_this6.controlCoordinates.touchCount === 0)\n            /* No touch */\n            {\n              /* Set attributes */\n              if (_this6.currentImage) {\n                _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\n              }\n\n              if (_this6.controlCoordinates.initialScale === 1) {\n                _this6.controlCoordinates.zoomed = false;\n\n                if (_this6.domNodes.caption.style.display === 'none') {\n                  _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\n                }\n              }\n\n              _this6.controlCoordinates.initialPinchDistance = null;\n              _this6.controlCoordinates.capture = false;\n            } else if (_this6.controlCoordinates.touchCount === 1)\n            /* Single touch */\n            {\n              _this6.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\n              _this6.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\n            } else if (_this6.controlCoordinates.touchCount > 1)\n            /* Pinch */\n            {\n              _this6.controlCoordinates.initialPinchDistance = null;\n            }\n        }\n\n        if (_this6.controlCoordinates.mousedown) {\n          _this6.controlCoordinates.mousedown = false;\n          var possibleDir = true;\n\n          if (!_this6.options.loop) {\n            if (_this6.currentImageIndex === 0 && _this6.controlCoordinates.swipeDiff < 0) {\n              possibleDir = false;\n            }\n\n            if (_this6.currentImageIndex >= _this6.relatedElements.length - 1 && _this6.controlCoordinates.swipeDiff > 0) {\n              possibleDir = false;\n            }\n          }\n\n          if (Math.abs(_this6.controlCoordinates.swipeDiff) > _this6.options.swipeTolerance && possibleDir) {\n            _this6.loadImage(_this6.controlCoordinates.swipeDiff > 0 ? 1 : -1);\n          } else if (_this6.options.animationSlide) {\n            _this6.slide(_this6.options.animationSpeed / 1000, 0 + 'px');\n          }\n\n          if (_this6.options.swipeClose && Math.abs(_this6.controlCoordinates.swipeYDiff) > 50 && Math.abs(_this6.controlCoordinates.swipeDiff) < _this6.options.swipeTolerance) {\n            _this6.close();\n          }\n        }\n      });\n      this.addEventListener(this.domNodes.image, ['dblclick'], function (event) {\n        if (_this6.isTouchDevice) return;\n        _this6.controlCoordinates.initialPointerOffsetX = event.clientX;\n        _this6.controlCoordinates.initialPointerOffsetY = event.clientY;\n        _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\n        _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\n        _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\n        _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\n        _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\n        _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\n\n        _this6.currentImage.classList.add('sl-transition');\n\n        if (!_this6.controlCoordinates.zoomed) {\n          _this6.controlCoordinates.initialScale = _this6.options.doubleTapZoom;\n\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\n\n          _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\n\n          if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\n            _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\n          }\n\n          _this6.controlCoordinates.zoomed = true;\n        } else {\n          _this6.controlCoordinates.initialScale = 1;\n\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\n\n          _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\n\n          _this6.controlCoordinates.zoomed = false;\n\n          if (_this6.domNodes.caption.style.display === 'none') {\n            _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\n          }\n        }\n\n        setTimeout(function () {\n          if (_this6.currentImage) {\n            _this6.currentImage.classList.remove('sl-transition');\n\n            _this6.currentImage.style[_this6.transitionPrefix + 'transform-origin'] = null;\n          }\n        }, 200);\n        _this6.controlCoordinates.capture = true;\n        return false;\n      });\n    }\n  }, {\n    key: \"getDimensions\",\n    value: function getDimensions(element) {\n      var styles = window.getComputedStyle(element),\n          height = element.offsetHeight,\n          width = element.offsetWidth,\n          borderTopWidth = parseFloat(styles.borderTopWidth),\n          borderBottomWidth = parseFloat(styles.borderBottomWidth),\n          paddingTop = parseFloat(styles.paddingTop),\n          paddingBottom = parseFloat(styles.paddingBottom),\n          borderLeftWidth = parseFloat(styles.borderLeftWidth),\n          borderRightWidth = parseFloat(styles.borderRightWidth),\n          paddingLeft = parseFloat(styles.paddingLeft),\n          paddingRight = parseFloat(styles.paddingRight);\n      return {\n        height: height - borderBottomWidth - borderTopWidth - paddingTop - paddingBottom,\n        width: width - borderLeftWidth - borderRightWidth - paddingLeft - paddingRight\n      };\n    }\n  }, {\n    key: \"updateHash\",\n    value: function updateHash() {\n      var newHash = 'pid=' + (this.currentImageIndex + 1),\n          newURL = window.location.href.split('#')[0] + '#' + newHash;\n      this.hashReseted = false;\n\n      if (this.pushStateSupport) {\n        window.history[this.historyHasChanges ? 'replaceState' : 'pushState']('', document.title, newURL);\n      } else {\n        // what is the browser target of this?\n        if (this.historyHasChanges) {\n          window.location.replace(newURL);\n        } else {\n          window.location.hash = newHash;\n        }\n      }\n\n      if (!this.historyHasChanges) {\n        this.urlChangedOnce = true;\n      }\n\n      this.historyHasChanges = true;\n    }\n  }, {\n    key: \"resetHash\",\n    value: function resetHash() {\n      this.hashReseted = true;\n\n      if (this.urlChangedOnce) {\n        history.back();\n      } else {\n        if (this.pushStateSupport) {\n          history.pushState('', document.title, window.location.pathname + window.location.search);\n        } else {\n          window.location.hash = '';\n        }\n      } //\n      //in case an history operation is still pending\n\n\n      clearTimeout(this.historyUpdateTimeout);\n    }\n  }, {\n    key: \"updateURL\",\n    value: function updateURL() {\n      clearTimeout(this.historyUpdateTimeout);\n\n      if (!this.historyHasChanges) {\n        this.updateHash(); // first time\n      } else {\n        this.historyUpdateTimeout = setTimeout(this.updateHash.bind(this), 800);\n      }\n    }\n  }, {\n    key: \"setCaption\",\n    value: function setCaption(captionText, imageWidth) {\n      var _this7 = this;\n\n      if (this.options.captions && captionText && captionText !== '' && typeof captionText !== \"undefined\") {\n        this.hide(this.domNodes.caption);\n        this.domNodes.caption.style.width = imageWidth + 'px';\n        this.domNodes.caption.innerHTML = captionText;\n        this.domNodes.image.appendChild(this.domNodes.caption);\n        setTimeout(function () {\n          _this7.fadeIn(_this7.domNodes.caption, _this7.options.fadeSpeed);\n        }, this.options.captionDelay);\n      }\n    }\n  }, {\n    key: \"slide\",\n    value: function slide(speed, pos) {\n      if (!this.transitionCapable) {\n        return this.domNodes.image.style.left = pos;\n      }\n\n      this.domNodes.image.style[this.transitionPrefix + 'transform'] = 'translateX(' + pos + ')';\n      this.domNodes.image.style[this.transitionPrefix + 'transition'] = this.transitionPrefix + 'transform ' + speed + 's linear';\n    }\n  }, {\n    key: \"getRelated\",\n    value: function getRelated(rel) {\n      var elems;\n\n      if (rel && rel !== false && rel !== 'nofollow') {\n        elems = Array.from(this.elements).filter(function (element) {\n          return element.getAttribute('rel') === rel;\n        });\n      } else {\n        elems = this.elements;\n      }\n\n      return elems;\n    }\n  }, {\n    key: \"openImage\",\n    value: function openImage(element) {\n      var _this8 = this;\n\n      element.dispatchEvent(new Event('show.' + this.eventNamespace));\n\n      if (this.options.disableScroll) {\n        this.globalScrollbarWidth = this.toggleScrollbar('hide');\n      }\n\n      if (this.options.htmlClass && this.options.htmlClass !== '') {\n        document.querySelector('html').classList.add(this.options.htmlClass);\n      }\n\n      document.body.appendChild(this.domNodes.wrapper);\n      this.domNodes.wrapper.appendChild(this.domNodes.image);\n\n      if (this.options.overlay) {\n        document.body.appendChild(this.domNodes.overlay);\n      }\n\n      this.relatedElements = this.getRelated(element.rel);\n\n      if (this.options.showCounter) {\n        if (this.relatedElements.length == 1 && this.domNodes.wrapper.contains(this.domNodes.counter)) {\n          this.domNodes.wrapper.removeChild(this.domNodes.counter);\n        } else if (this.relatedElements.length > 1 && !this.domNodes.wrapper.contains(this.domNodes.counter)) {\n          this.domNodes.wrapper.appendChild(this.domNodes.counter);\n        }\n      }\n\n      this.isAnimating = true;\n      this.currentImageIndex = this.relatedElements.indexOf(element);\n      var targetURL = element.getAttribute(this.options.sourceAttr);\n      this.currentImage = document.createElement('img');\n      this.currentImage.style.display = 'none';\n      this.currentImage.setAttribute('src', targetURL);\n      this.currentImage.dataset.scale = 1;\n      this.currentImage.dataset.translateX = 0;\n      this.currentImage.dataset.translateY = 0;\n\n      if (this.loadedImages.indexOf(targetURL) === -1) {\n        this.loadedImages.push(targetURL);\n      }\n\n      this.domNodes.image.innerHTML = '';\n      this.domNodes.image.setAttribute('style', '');\n      this.domNodes.image.appendChild(this.currentImage);\n      this.fadeIn(this.domNodes.overlay, this.options.fadeSpeed);\n      this.fadeIn([this.domNodes.counter, this.domNodes.navigation, this.domNodes.closeButton], this.options.fadeSpeed);\n      this.show(this.domNodes.spinner);\n      this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\n      this.domNodes.counter.querySelector('.sl-total').innerHTML = this.relatedElements.length;\n      this.adjustImage();\n\n      if (this.options.preloading) {\n        this.preload();\n      }\n\n      setTimeout(function () {\n        element.dispatchEvent(new Event('shown.' + _this8.eventNamespace));\n      }, this.options.animationSpeed);\n    }\n  }, {\n    key: \"forceFocus\",\n    value: function forceFocus() {\n      var _this9 = this;\n\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n      this.addEventListener(document, 'focusin.' + this.eventNamespace, function (event) {\n        if (document !== event.target && _this9.domNodes.wrapper !== event.target && !_this9.domNodes.wrapper.contains(event.target)) {\n          _this9.domNodes.wrapper.focus();\n        }\n      });\n    } // utility\n\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener(elements, events, callback, opts) {\n      elements = this.wrap(elements);\n      events = this.wrap(events);\n\n      var _iterator = _createForOfIteratorHelper(elements),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var element = _step.value;\n\n          if (!element.namespaces) {\n            element.namespaces = {};\n          } // save the namespaces addEventListener the DOM element itself\n\n\n          var _iterator2 = _createForOfIteratorHelper(events),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var event = _step2.value;\n              var options = opts || false;\n              var needsPassiveFix = ['touchstart', 'touchmove'].indexOf(event.split('.')[0]) >= 0;\n\n              if (needsPassiveFix && this.isPassiveEventsSupported) {\n                if (_typeof(options) === 'object') {\n                  options.passive = true;\n                } else {\n                  options = {\n                    passive: true\n                  };\n                }\n              }\n\n              element.namespaces[event] = callback;\n              element.addEventListener(event.split('.')[0], callback, options);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"removeEventListener\",\n    value: function removeEventListener(elements, events) {\n      elements = this.wrap(elements);\n      events = this.wrap(events);\n\n      var _iterator3 = _createForOfIteratorHelper(elements),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var element = _step3.value;\n\n          var _iterator4 = _createForOfIteratorHelper(events),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var event = _step4.value;\n\n              if (element.namespaces && element.namespaces[event]) {\n                element.removeEventListener(event.split('.')[0], element.namespaces[event]);\n                delete element.namespaces[event];\n              }\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"fadeOut\",\n    value: function fadeOut(elements, duration, callback) {\n      var _this10 = this;\n\n      elements = this.wrap(elements);\n\n      var _iterator5 = _createForOfIteratorHelper(elements),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var element = _step5.value;\n          element.style.opacity = parseFloat(element) || window.getComputedStyle(element).getPropertyValue(\"opacity\");\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      this.isFadeIn = false;\n\n      var step = 16.66666 / (duration || this.options.fadeSpeed),\n          fade = function fade() {\n        var currentOpacity = parseFloat(elements[0].style.opacity);\n\n        if ((currentOpacity -= step) < 0) {\n          var _iterator6 = _createForOfIteratorHelper(elements),\n              _step6;\n\n          try {\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n              var element = _step6.value;\n              element.style.display = \"none\"; // element.style.opacity = '';\n\n              element.style.opacity = 1;\n            }\n          } catch (err) {\n            _iterator6.e(err);\n          } finally {\n            _iterator6.f();\n          }\n\n          callback && callback.call(_this10, elements);\n        } else {\n          var _iterator7 = _createForOfIteratorHelper(elements),\n              _step7;\n\n          try {\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n              var _element = _step7.value;\n              _element.style.opacity = currentOpacity;\n            }\n          } catch (err) {\n            _iterator7.e(err);\n          } finally {\n            _iterator7.f();\n          }\n\n          requestAnimationFrame(fade);\n        }\n      };\n\n      fade();\n    }\n  }, {\n    key: \"fadeIn\",\n    value: function fadeIn(elements, duration, callback, display) {\n      var _this11 = this;\n\n      elements = this.wrap(elements);\n\n      var _iterator8 = _createForOfIteratorHelper(elements),\n          _step8;\n\n      try {\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n          var element = _step8.value;\n          element.style.opacity = 0;\n          element.style.display = display || \"block\";\n        }\n      } catch (err) {\n        _iterator8.e(err);\n      } finally {\n        _iterator8.f();\n      }\n\n      this.isFadeIn = true;\n\n      var opacityTarget = parseFloat(elements[0].dataset.opacityTarget || 1),\n          step = 16.66666 * opacityTarget / (duration || this.options.fadeSpeed),\n          fade = function fade() {\n        var currentOpacity = parseFloat(elements[0].style.opacity);\n\n        if (!((currentOpacity += step) > opacityTarget)) {\n          var _iterator9 = _createForOfIteratorHelper(elements),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var element = _step9.value;\n              element.style.opacity = currentOpacity;\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n\n          if (!_this11.isFadeIn) return;\n          requestAnimationFrame(fade);\n        } else {\n          var _iterator10 = _createForOfIteratorHelper(elements),\n              _step10;\n\n          try {\n            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n              var _element2 = _step10.value;\n              _element2.style.opacity = opacityTarget;\n            }\n          } catch (err) {\n            _iterator10.e(err);\n          } finally {\n            _iterator10.f();\n          }\n\n          callback && callback.call(_this11, elements);\n        }\n      };\n\n      fade();\n    }\n  }, {\n    key: \"hide\",\n    value: function hide(elements) {\n      elements = this.wrap(elements);\n\n      var _iterator11 = _createForOfIteratorHelper(elements),\n          _step11;\n\n      try {\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n          var element = _step11.value;\n\n          if (element.style.display != 'none') {\n            element.dataset.initialDisplay = element.style.display;\n          }\n\n          element.style.display = 'none';\n        }\n      } catch (err) {\n        _iterator11.e(err);\n      } finally {\n        _iterator11.f();\n      }\n    }\n  }, {\n    key: \"show\",\n    value: function show(elements, display) {\n      elements = this.wrap(elements);\n\n      var _iterator12 = _createForOfIteratorHelper(elements),\n          _step12;\n\n      try {\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\n          var element = _step12.value;\n          element.style.display = element.dataset.initialDisplay || display || 'block';\n        }\n      } catch (err) {\n        _iterator12.e(err);\n      } finally {\n        _iterator12.f();\n      }\n    }\n  }, {\n    key: \"wrap\",\n    value: function wrap(input) {\n      return typeof input[Symbol.iterator] === 'function' && typeof input !== 'string' ? input : [input];\n    }\n  }, {\n    key: \"on\",\n    value: function on(events, callback) {\n      events = this.wrap(events);\n\n      var _iterator13 = _createForOfIteratorHelper(this.elements),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var element = _step13.value;\n\n          if (!element.fullyNamespacedEvents) {\n            element.fullyNamespacedEvents = {};\n          }\n\n          var _iterator14 = _createForOfIteratorHelper(events),\n              _step14;\n\n          try {\n            for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n              var event = _step14.value;\n              element.fullyNamespacedEvents[event] = callback;\n              element.addEventListener(event, callback);\n            }\n          } catch (err) {\n            _iterator14.e(err);\n          } finally {\n            _iterator14.f();\n          }\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(events) {\n      events = this.wrap(events);\n\n      var _iterator15 = _createForOfIteratorHelper(this.elements),\n          _step15;\n\n      try {\n        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n          var element = _step15.value;\n\n          var _iterator16 = _createForOfIteratorHelper(events),\n              _step16;\n\n          try {\n            for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n              var event = _step16.value;\n\n              if (typeof element.fullyNamespacedEvents !== 'undefined' && event in element.fullyNamespacedEvents) {\n                element.removeEventListener(event, element.fullyNamespacedEvents[event]);\n              }\n            }\n          } catch (err) {\n            _iterator16.e(err);\n          } finally {\n            _iterator16.f();\n          }\n        }\n      } catch (err) {\n        _iterator15.e(err);\n      } finally {\n        _iterator15.f();\n      }\n\n      return this;\n    } // api\n\n  }, {\n    key: \"open\",\n    value: function open(elem) {\n      elem = elem || this.elements[0];\n\n      if (typeof jQuery !== \"undefined\" && elem instanceof jQuery) {\n        elem = elem.get(0);\n      }\n\n      this.initialImageIndex = this.elements.indexOf(elem);\n\n      if (this.initialImageIndex > -1) {\n        this.openImage(elem);\n      }\n    }\n  }, {\n    key: \"next\",\n    value: function next() {\n      this.loadImage(1);\n    }\n  }, {\n    key: \"prev\",\n    value: function prev() {\n      this.loadImage(-1);\n    } // get some useful data\n\n  }, {\n    key: \"getLighboxData\",\n    value: function getLighboxData() {\n      return {\n        currentImageIndex: this.currentImageIndex,\n        currentImage: this.currentImage,\n        globalScrollbarWidth: this.globalScrollbarWidth\n      };\n    } //close is exposed anyways..\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      //remove all custom event listeners from elements\n      this.off(['close.' + this.eventNamespace, 'closed.' + this.eventNamespace, 'nextImageLoaded.' + this.eventNamespace, 'prevImageLoaded.' + this.eventNamespace, 'change.' + this.eventNamespace, 'nextDone.' + this.eventNamespace, 'prevDone.' + this.eventNamespace, 'error.' + this.eventNamespace, 'changed.' + this.eventNamespace, 'next.' + this.eventNamespace, 'prev.' + this.eventNamespace, 'show.' + this.eventNamespace, 'shown.' + this.eventNamespace]);\n      this.removeEventListener(this.elements, 'click.' + this.eventNamespace);\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\n      this.removeEventListener(document.body, 'contextmenu.' + this.eventNamespace);\n      this.removeEventListener(document.body, 'keyup.' + this.eventNamespace);\n      this.removeEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace);\n      this.removeEventListener(this.domNodes.closeButton, 'click.' + this.eventNamespace);\n      this.removeEventListener(window, 'resize.' + this.eventNamespace);\n      this.removeEventListener(window, 'hashchange.' + this.eventNamespace);\n      this.close();\n\n      if (this.isOpen) {\n        document.body.removeChild(this.domNodes.wrapper);\n        document.body.removeChild(this.domNodes.overlay);\n      }\n\n      this.elements = null;\n    }\n  }, {\n    key: \"refresh\",\n    value: function refresh() {\n      if (!this.initialSelector) {\n        throw 'refreshing only works when you initialize using a selector!';\n      }\n\n      var options = this.options,\n          selector = this.initialSelector;\n      this.destroy();\n      this.constructor(selector, options);\n      return this;\n    }\n  }]);\n\n  return SimpleLightbox;\n}();\n\nvar _default = SimpleLightbox;\nexports[\"default\"] = _default;\nglobal.SimpleLightbox = SimpleLightbox;","map":{"version":3,"sources":["C:/Users/wrong/Downloads/startbootstrap-creative-gh-pages/Cards of Wonder/cow/node_modules/simplelightbox/dist/simple-lightbox.modules.js"],"names":["Object","defineProperty","exports","value","_typeof","obj","Symbol","iterator","constructor","prototype","_createForOfIteratorHelper","o","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","call","step","next","_e2","minLen","_arrayLikeToArray","toString","slice","name","from","test","arr","len","arr2","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_defineProperty","SimpleLightbox","elements","options","_this","sourceAttr","overlay","overlayOpacity","spinner","nav","navText","captions","captionDelay","captionSelector","captionType","captionsData","captionPosition","captionClass","close","closeText","swipeClose","showCounter","fileExt","animationSlide","animationSpeed","preloading","enableKeyboard","loop","rel","docClose","swipeTolerance","className","widthRatio","heightRatio","scaleImageToRatio","disableRightClick","disableScroll","alertError","alertErrorMessage","additionalHtml","history","throttleInterval","doubleTapZoom","maxZoom","htmlClass","rtl","fixedClass","fadeSpeed","uniqueImages","focus","scrollZoom","scrollZoomFactor","window","navigator","platform","swipeDiff","swipeYDiff","swipeStart","swipeEnd","swipeYStart","swipeYEnd","mousedown","imageLeft","zoomed","containerHeight","containerWidth","containerOffsetX","containerOffsetY","imgHeight","imgWidth","capture","initialOffsetX","initialOffsetY","initialPointerOffsetX","initialPointerOffsetY","initialPointerOffsetX2","initialPointerOffsetY2","initialScale","initialPinchDistance","pointerOffsetX","pointerOffsetY","pointerOffsetX2","pointerOffsetY2","targetOffsetX","targetOffsetY","targetScale","pinchOffsetX","pinchOffsetY","limitOffsetX","limitOffsetY","scaleDifference","targetPinchDistance","touchCount","doubleTapped","touchmoveCount","assign","defaultOptions","isPassiveEventsSupported","checkPassiveEventsSupport","initialSelector","document","querySelectorAll","relatedElements","transitionPrefix","calculateTransitionPrefix","transitionCapable","initialLocationHash","hash","getRelated","imgArr","filter","element","src","getAttribute","indexOf","push","createDomNodes","domNodes","wrapper","appendChild","closeButton","navigation","addEventListener","eventNamespace","event","isValidLink","currentTarget","preventDefault","isAnimating","initialImageIndex","openImage","isOpen","body","parentElement","classList","contains","throttle","controlCoordinates","currentImage","setAttribute","loadImage","addEvents","supportsPassive","opts","get","removeEventListener","createElement","add","dataset","opacityTarget","innerHTML","concat","counter","caption","image","func","limit","inThrottle","apply","arguments","setTimeout","RegExp","documentElement","style","toggleScrollbar","type","scrollbarWidth","fixedElements","fullWindowWidth","innerWidth","documentElementRect","getBoundingClientRect","right","Math","abs","left","clientWidth","isAppleDevice","scrollDiv","paddingRight","parseInt","offsetWidth","removeChild","originalPaddingRight","forEach","actualPadding","calculatedPadding","getComputedStyle","parseFloat","remove","padding","_this2","isClosing","currentImageIndex","dispatchEvent","Event","historyHasChanges","hashReseted","resetHash","fadeOut","querySelector","minMax","location","substring","preload","_this3","index","prev","nextImage","Image","prevImage","loadedImages","direction","_this4","slideDirection","newIndex","slide","show","adjustImage","_this5","tmpImage","windowWidth","windowHeight","innerHeight","scale","translateX","translateY","zoomPanElement","display","dirIsDefined","alert","updateURL","imageWidth","width","imageHeight","height","ratio","top","globalScrollbarWidth","forceFocus","fadeIn","captionContainer","captionText","hide","setCaption","min","max","setZoomData","hashchangeHandler","_this6","bind","getElementsByTagName","tagName","match","getDimensions","offsetLeft","offsetTop","delta","wheelDelta","undefined","detail","scrollTopPos","scrollTop","pageX","pageY","opacity","clientX","clientY","touches","sqrt","isTouchDevice","possibleDir","styles","offsetHeight","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom","borderLeftWidth","borderRightWidth","paddingLeft","updateHash","newHash","newURL","href","split","pushStateSupport","title","replace","urlChangedOnce","back","pushState","pathname","search","clearTimeout","historyUpdateTimeout","_this7","speed","pos","elems","_this8","targetURL","_this9","events","callback","wrap","_iterator","_step","namespaces","_iterator2","_step2","needsPassiveFix","passive","_iterator3","_step3","_iterator4","_step4","duration","_this10","_iterator5","_step5","getPropertyValue","isFadeIn","fade","currentOpacity","_iterator6","_step6","_iterator7","_step7","_element","requestAnimationFrame","_this11","_iterator8","_step8","_iterator9","_step9","_iterator10","_step10","_element2","_iterator11","_step11","initialDisplay","_iterator12","_step12","input","on","_iterator13","_step13","fullyNamespacedEvents","_iterator14","_step14","off","_iterator15","_step15","_iterator16","_step16","open","elem","jQuery","getLighboxData","destroy","refresh","selector","_default","global"],"mappings":"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","sourcesContent":["/*!\r\n\tBy AndrÃ© Rinas, www.andrerinas.de\r\n\tDocumentation, www.simplelightbox.de\r\n\tAvailable for use under the MIT License\r\n\tVersion 2.10.3\r\n*/\r\n\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = void 0;\r\n\r\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\r\n\r\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\r\n\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\n\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nvar SimpleLightbox = /*#__PURE__*/function () {\r\n  function SimpleLightbox(elements, options) {\r\n    var _this = this;\r\n\r\n    _classCallCheck(this, SimpleLightbox);\r\n\r\n    _defineProperty(this, \"defaultOptions\", {\r\n      sourceAttr: 'href',\r\n      overlay: true,\r\n      overlayOpacity: 0.7,\r\n      spinner: true,\r\n      nav: true,\r\n      navText: ['&lsaquo;', '&rsaquo;'],\r\n      captions: true,\r\n      captionDelay: 0,\r\n      captionSelector: 'img',\r\n      captionType: 'attr',\r\n      captionsData: 'title',\r\n      captionPosition: 'bottom',\r\n      captionClass: '',\r\n      close: true,\r\n      closeText: '&times;',\r\n      swipeClose: true,\r\n      showCounter: true,\r\n      fileExt: 'png|jpg|jpeg|gif|webp',\r\n      animationSlide: true,\r\n      animationSpeed: 250,\r\n      preloading: true,\r\n      enableKeyboard: true,\r\n      loop: true,\r\n      rel: false,\r\n      docClose: true,\r\n      swipeTolerance: 50,\r\n      className: 'simple-lightbox',\r\n      widthRatio: 0.8,\r\n      heightRatio: 0.9,\r\n      scaleImageToRatio: false,\r\n      disableRightClick: false,\r\n      disableScroll: true,\r\n      alertError: true,\r\n      alertErrorMessage: 'Image not found, next image will be loaded',\r\n      additionalHtml: false,\r\n      history: true,\r\n      throttleInterval: 0,\r\n      doubleTapZoom: 2,\r\n      maxZoom: 10,\r\n      htmlClass: 'has-lightbox',\r\n      rtl: false,\r\n      fixedClass: 'sl-fixed',\r\n      fadeSpeed: 300,\r\n      uniqueImages: true,\r\n      focus: true,\r\n      scrollZoom: true,\r\n      scrollZoomFactor: 0.5\r\n    });\r\n\r\n    _defineProperty(this, \"transitionPrefix\", void 0);\r\n\r\n    _defineProperty(this, \"isPassiveEventsSupported\", void 0);\r\n\r\n    _defineProperty(this, \"transitionCapable\", false);\r\n\r\n    _defineProperty(this, \"isTouchDevice\", 'ontouchstart' in window);\r\n\r\n    _defineProperty(this, \"isAppleDevice\", /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));\r\n\r\n    _defineProperty(this, \"initialLocationHash\", void 0);\r\n\r\n    _defineProperty(this, \"pushStateSupport\", 'pushState' in history);\r\n\r\n    _defineProperty(this, \"isOpen\", false);\r\n\r\n    _defineProperty(this, \"isAnimating\", false);\r\n\r\n    _defineProperty(this, \"isClosing\", false);\r\n\r\n    _defineProperty(this, \"isFadeIn\", false);\r\n\r\n    _defineProperty(this, \"urlChangedOnce\", false);\r\n\r\n    _defineProperty(this, \"hashReseted\", false);\r\n\r\n    _defineProperty(this, \"historyHasChanges\", false);\r\n\r\n    _defineProperty(this, \"historyUpdateTimeout\", null);\r\n\r\n    _defineProperty(this, \"currentImage\", void 0);\r\n\r\n    _defineProperty(this, \"eventNamespace\", 'simplelightbox');\r\n\r\n    _defineProperty(this, \"domNodes\", {});\r\n\r\n    _defineProperty(this, \"loadedImages\", []);\r\n\r\n    _defineProperty(this, \"initialImageIndex\", 0);\r\n\r\n    _defineProperty(this, \"currentImageIndex\", 0);\r\n\r\n    _defineProperty(this, \"initialSelector\", null);\r\n\r\n    _defineProperty(this, \"globalScrollbarWidth\", 0);\r\n\r\n    _defineProperty(this, \"controlCoordinates\", {\r\n      swipeDiff: 0,\r\n      swipeYDiff: 0,\r\n      swipeStart: 0,\r\n      swipeEnd: 0,\r\n      swipeYStart: 0,\r\n      swipeYEnd: 0,\r\n      mousedown: false,\r\n      imageLeft: 0,\r\n      zoomed: false,\r\n      containerHeight: 0,\r\n      containerWidth: 0,\r\n      containerOffsetX: 0,\r\n      containerOffsetY: 0,\r\n      imgHeight: 0,\r\n      imgWidth: 0,\r\n      capture: false,\r\n      initialOffsetX: 0,\r\n      initialOffsetY: 0,\r\n      initialPointerOffsetX: 0,\r\n      initialPointerOffsetY: 0,\r\n      initialPointerOffsetX2: 0,\r\n      initialPointerOffsetY2: 0,\r\n      initialScale: 1,\r\n      initialPinchDistance: 0,\r\n      pointerOffsetX: 0,\r\n      pointerOffsetY: 0,\r\n      pointerOffsetX2: 0,\r\n      pointerOffsetY2: 0,\r\n      targetOffsetX: 0,\r\n      targetOffsetY: 0,\r\n      targetScale: 0,\r\n      pinchOffsetX: 0,\r\n      pinchOffsetY: 0,\r\n      limitOffsetX: 0,\r\n      limitOffsetY: 0,\r\n      scaleDifference: 0,\r\n      targetPinchDistance: 0,\r\n      touchCount: 0,\r\n      doubleTapped: false,\r\n      touchmoveCount: 0\r\n    });\r\n\r\n    this.options = Object.assign(this.defaultOptions, options);\r\n    this.isPassiveEventsSupported = this.checkPassiveEventsSupport();\r\n\r\n    if (typeof elements === 'string') {\r\n      this.initialSelector = elements;\r\n      this.elements = Array.from(document.querySelectorAll(elements));\r\n    } else {\r\n      this.elements = typeof elements.length !== 'undefined' && elements.length > 0 ? Array.from(elements) : [elements];\r\n    }\r\n\r\n    this.relatedElements = [];\r\n    this.transitionPrefix = this.calculateTransitionPrefix();\r\n    this.transitionCapable = this.transitionPrefix !== false;\r\n    this.initialLocationHash = this.hash; // this should be handled by attribute selector IMHO! => 'a[rel=bla]'...\r\n\r\n    if (this.options.rel) {\r\n      this.elements = this.getRelated(this.options.rel);\r\n    }\r\n\r\n    if (this.options.uniqueImages) {\r\n      var imgArr = [];\r\n      this.elements = Array.from(this.elements).filter(function (element) {\r\n        var src = element.getAttribute(_this.options.sourceAttr);\r\n\r\n        if (imgArr.indexOf(src) === -1) {\r\n          imgArr.push(src);\r\n          return true;\r\n        }\r\n\r\n        return false;\r\n      });\r\n    }\r\n\r\n    this.createDomNodes();\r\n\r\n    if (this.options.close) {\r\n      this.domNodes.wrapper.appendChild(this.domNodes.closeButton);\r\n    }\r\n\r\n    if (this.options.nav) {\r\n      this.domNodes.wrapper.appendChild(this.domNodes.navigation);\r\n    }\r\n\r\n    if (this.options.spinner) {\r\n      this.domNodes.wrapper.appendChild(this.domNodes.spinner);\r\n    }\r\n\r\n    this.addEventListener(this.elements, 'click.' + this.eventNamespace, function (event) {\r\n      if (_this.isValidLink(event.currentTarget)) {\r\n        event.preventDefault();\r\n\r\n        if (_this.isAnimating) {\r\n          return false;\r\n        }\r\n\r\n        _this.initialImageIndex = _this.elements.indexOf(event.currentTarget);\r\n\r\n        _this.openImage(event.currentTarget);\r\n      }\r\n    }); // close addEventListener click addEventListener doc\r\n\r\n    if (this.options.docClose) {\r\n      this.addEventListener(this.domNodes.wrapper, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], function (event) {\r\n        if (_this.isOpen && event.target === event.currentTarget) {\r\n          _this.close();\r\n        }\r\n      });\r\n    } // disable rightclick\r\n\r\n\r\n    if (this.options.disableRightClick) {\r\n      this.addEventListener(document.body, 'contextmenu.' + this.eventNamespace, function (event) {\r\n        if (event.target.parentElement.classList.contains(\"sl-image\")) {\r\n          event.preventDefault();\r\n        }\r\n      });\r\n    } // keyboard-control\r\n\r\n\r\n    if (this.options.enableKeyboard) {\r\n      this.addEventListener(document.body, 'keyup.' + this.eventNamespace, this.throttle(function (event) {\r\n        _this.controlCoordinates.swipeDiff = 0; // keyboard control only if lightbox is open\r\n\r\n        if (_this.isAnimating && event.key === 'Escape') {\r\n          _this.currentImage.setAttribute('src', '');\r\n\r\n          _this.isAnimating = false;\r\n          return _this.close();\r\n        }\r\n\r\n        if (_this.isOpen) {\r\n          event.preventDefault();\r\n\r\n          if (event.key === 'Escape') {\r\n            _this.close();\r\n          }\r\n\r\n          if (!_this.isAnimating && ['ArrowLeft', 'ArrowRight'].indexOf(event.key) > -1) {\r\n            _this.loadImage(event.key === 'ArrowRight' ? 1 : -1);\r\n          }\r\n        }\r\n      }, this.options.throttleInterval));\r\n    }\r\n\r\n    this.addEvents();\r\n  }\r\n\r\n  _createClass(SimpleLightbox, [{\r\n    key: \"checkPassiveEventsSupport\",\r\n    value: function checkPassiveEventsSupport() {\r\n      // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\r\n      // Test via a getter in the options object to see if the passive property is accessed\r\n      var supportsPassive = false;\r\n\r\n      try {\r\n        var opts = Object.defineProperty({}, 'passive', {\r\n          get: function get() {\r\n            supportsPassive = true;\r\n          }\r\n        });\r\n        window.addEventListener(\"testPassive\", null, opts);\r\n        window.removeEventListener(\"testPassive\", null, opts);\r\n      } catch (e) {}\r\n\r\n      return supportsPassive;\r\n    }\r\n  }, {\r\n    key: \"createDomNodes\",\r\n    value: function createDomNodes() {\r\n      this.domNodes.overlay = document.createElement('div');\r\n      this.domNodes.overlay.classList.add('sl-overlay');\r\n      this.domNodes.overlay.dataset.opacityTarget = this.options.overlayOpacity;\r\n      this.domNodes.closeButton = document.createElement('button');\r\n      this.domNodes.closeButton.classList.add('sl-close');\r\n      this.domNodes.closeButton.innerHTML = this.options.closeText;\r\n      this.domNodes.spinner = document.createElement('div');\r\n      this.domNodes.spinner.classList.add('sl-spinner');\r\n      this.domNodes.spinner.innerHTML = '<div></div>';\r\n      this.domNodes.navigation = document.createElement('div');\r\n      this.domNodes.navigation.classList.add('sl-navigation');\r\n      this.domNodes.navigation.innerHTML = \"<button class=\\\"sl-prev\\\">\".concat(this.options.navText[0], \"</button><button class=\\\"sl-next\\\">\").concat(this.options.navText[1], \"</button>\");\r\n      this.domNodes.counter = document.createElement('div');\r\n      this.domNodes.counter.classList.add('sl-counter');\r\n      this.domNodes.counter.innerHTML = '<span class=\"sl-current\"></span>/<span class=\"sl-total\"></span>';\r\n      this.domNodes.caption = document.createElement('div');\r\n      this.domNodes.caption.classList.add('sl-caption', 'pos-' + this.options.captionPosition);\r\n\r\n      if (this.options.captionClass) {\r\n        this.domNodes.caption.classList.add(this.options.captionClass);\r\n      }\r\n\r\n      this.domNodes.image = document.createElement('div');\r\n      this.domNodes.image.classList.add('sl-image');\r\n      this.domNodes.wrapper = document.createElement('div');\r\n      this.domNodes.wrapper.classList.add('sl-wrapper');\r\n      this.domNodes.wrapper.setAttribute('tabindex', -1);\r\n      this.domNodes.wrapper.setAttribute('role', 'dialog');\r\n      this.domNodes.wrapper.setAttribute('aria-hidden', false);\r\n\r\n      if (this.options.className) {\r\n        this.domNodes.wrapper.classList.add(this.options.className);\r\n      }\r\n\r\n      if (this.options.rtl) {\r\n        this.domNodes.wrapper.classList.add('sl-dir-rtl');\r\n      }\r\n    }\r\n  }, {\r\n    key: \"throttle\",\r\n    value: function throttle(func, limit) {\r\n      var inThrottle;\r\n      return function () {\r\n        if (!inThrottle) {\r\n          func.apply(this, arguments);\r\n          inThrottle = true;\r\n          setTimeout(function () {\r\n            return inThrottle = false;\r\n          }, limit);\r\n        }\r\n      };\r\n    }\r\n  }, {\r\n    key: \"isValidLink\",\r\n    value: function isValidLink(element) {\r\n      return !this.options.fileExt || element.getAttribute(this.options.sourceAttr) && new RegExp('(' + this.options.fileExt + ')$', 'i').test(element.getAttribute(this.options.sourceAttr));\r\n    }\r\n  }, {\r\n    key: \"calculateTransitionPrefix\",\r\n    value: function calculateTransitionPrefix() {\r\n      var s = (document.body || document.documentElement).style;\r\n      return 'transition' in s ? '' : 'WebkitTransition' in s ? '-webkit-' : 'MozTransition' in s ? '-moz-' : 'OTransition' in s ? '-o' : false;\r\n    }\r\n  }, {\r\n    key: \"toggleScrollbar\",\r\n    value: function toggleScrollbar(type) {\r\n      var scrollbarWidth = 0;\r\n      var fixedElements = [].slice.call(document.querySelectorAll('.' + this.options.fixedClass));\r\n\r\n      if (type === 'hide') {\r\n        var fullWindowWidth = window.innerWidth;\r\n\r\n        if (!fullWindowWidth) {\r\n          var documentElementRect = document.documentElement.getBoundingClientRect();\r\n          fullWindowWidth = documentElementRect.right - Math.abs(documentElementRect.left);\r\n        }\r\n\r\n        if (document.body.clientWidth < fullWindowWidth || this.isAppleDevice) {\r\n          var scrollDiv = document.createElement('div'),\r\n              paddingRight = parseInt(document.body.style.paddingRight || 0, 10);\r\n          scrollDiv.classList.add('sl-scrollbar-measure');\r\n          document.body.appendChild(scrollDiv);\r\n          scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\r\n          document.body.removeChild(scrollDiv);\r\n          document.body.dataset.originalPaddingRight = paddingRight;\r\n\r\n          if (scrollbarWidth > 0 || scrollbarWidth == 0 && this.isAppleDevice) {\r\n            document.body.classList.add('hidden-scroll');\r\n            document.body.style.paddingRight = paddingRight + scrollbarWidth + 'px';\r\n            fixedElements.forEach(function (element) {\r\n              var actualPadding = element.style.paddingRight;\r\n              var calculatedPadding = window.getComputedStyle(element)['padding-right'];\r\n              element.dataset.originalPaddingRight = actualPadding;\r\n              element.style.paddingRight = \"\".concat(parseFloat(calculatedPadding) + scrollbarWidth, \"px\");\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        document.body.classList.remove('hidden-scroll');\r\n        document.body.style.paddingRight = document.body.dataset.originalPaddingRight;\r\n        fixedElements.forEach(function (element) {\r\n          var padding = element.dataset.originalPaddingRight;\r\n\r\n          if (typeof padding !== 'undefined') {\r\n            element.style.paddingRight = padding;\r\n          }\r\n        });\r\n      }\r\n\r\n      return scrollbarWidth;\r\n    }\r\n  }, {\r\n    key: \"close\",\r\n    value: function close() {\r\n      var _this2 = this;\r\n\r\n      if (!this.isOpen || this.isAnimating || this.isClosing) {\r\n        return false;\r\n      }\r\n\r\n      this.isClosing = true;\r\n      var element = this.relatedElements[this.currentImageIndex];\r\n      element.dispatchEvent(new Event('close.simplelightbox'));\r\n\r\n      if (this.options.history) {\r\n        this.historyHasChanges = false;\r\n\r\n        if (!this.hashReseted) {\r\n          this.resetHash();\r\n        }\r\n      }\r\n\r\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\r\n      this.fadeOut(this.domNodes.overlay, this.options.fadeSpeed);\r\n      this.fadeOut(document.querySelectorAll('.sl-image img,  .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter'), this.options.fadeSpeed, function () {\r\n        if (_this2.options.disableScroll) {\r\n          _this2.toggleScrollbar('show');\r\n        }\r\n\r\n        if (_this2.options.htmlClass && _this2.options.htmlClass !== '') {\r\n          document.querySelector('html').classList.remove(_this2.options.htmlClass);\r\n        }\r\n\r\n        document.body.removeChild(_this2.domNodes.wrapper);\r\n        document.body.removeChild(_this2.domNodes.overlay);\r\n        _this2.domNodes.additionalHtml = null;\r\n        element.dispatchEvent(new Event('closed.simplelightbox'));\r\n        _this2.isClosing = false;\r\n      });\r\n      this.currentImage = null;\r\n      this.isOpen = false;\r\n      this.isAnimating = false; // reset touchcontrol coordinates\r\n\r\n      for (var key in this.controlCoordinates) {\r\n        this.controlCoordinates[key] = 0;\r\n      }\r\n\r\n      this.controlCoordinates.mousedown = false;\r\n      this.controlCoordinates.zoomed = false;\r\n      this.controlCoordinates.capture = false;\r\n      this.controlCoordinates.initialScale = this.minMax(1, 1, this.options.maxZoom);\r\n      this.controlCoordinates.doubleTapped = false;\r\n    }\r\n  }, {\r\n    key: \"hash\",\r\n    get: function get() {\r\n      return window.location.hash.substring(1);\r\n    }\r\n  }, {\r\n    key: \"preload\",\r\n    value: function preload() {\r\n      var _this3 = this;\r\n\r\n      var index = this.currentImageIndex,\r\n          length = this.relatedElements.length,\r\n          next = index + 1 < 0 ? length - 1 : index + 1 >= length - 1 ? 0 : index + 1,\r\n          prev = index - 1 < 0 ? length - 1 : index - 1 >= length - 1 ? 0 : index - 1,\r\n          nextImage = new Image(),\r\n          prevImage = new Image();\r\n      nextImage.addEventListener('load', function (event) {\r\n        var src = event.target.getAttribute('src');\r\n\r\n        if (_this3.loadedImages.indexOf(src) === -1) {\r\n          //is this condition even required... setting multiple times will not change usage...\r\n          _this3.loadedImages.push(src);\r\n        }\r\n\r\n        _this3.relatedElements[index].dispatchEvent(new Event('nextImageLoaded.' + _this3.eventNamespace));\r\n      });\r\n      nextImage.setAttribute('src', this.relatedElements[next].getAttribute(this.options.sourceAttr));\r\n      prevImage.addEventListener('load', function (event) {\r\n        var src = event.target.getAttribute('src');\r\n\r\n        if (_this3.loadedImages.indexOf(src) === -1) {\r\n          _this3.loadedImages.push(src);\r\n        }\r\n\r\n        _this3.relatedElements[index].dispatchEvent(new Event('prevImageLoaded.' + _this3.eventNamespace));\r\n      });\r\n      prevImage.setAttribute('src', this.relatedElements[prev].getAttribute(this.options.sourceAttr));\r\n    }\r\n  }, {\r\n    key: \"loadImage\",\r\n    value: function loadImage(direction) {\r\n      var _this4 = this;\r\n\r\n      var slideDirection = direction;\r\n\r\n      if (this.options.rtl) {\r\n        direction = -direction;\r\n      }\r\n\r\n      this.relatedElements[this.currentImageIndex].dispatchEvent(new Event('change.' + this.eventNamespace));\r\n      this.relatedElements[this.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'next' : 'prev') + '.' + this.eventNamespace));\r\n      var newIndex = this.currentImageIndex + direction;\r\n\r\n      if (this.isAnimating || (newIndex < 0 || newIndex >= this.relatedElements.length) && this.options.loop === false) {\r\n        return false;\r\n      }\r\n\r\n      this.currentImageIndex = newIndex < 0 ? this.relatedElements.length - 1 : newIndex > this.relatedElements.length - 1 ? 0 : newIndex;\r\n      this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\r\n\r\n      if (this.options.animationSlide) {\r\n        this.slide(this.options.animationSpeed / 1000, -100 * slideDirection - this.controlCoordinates.swipeDiff + 'px');\r\n      }\r\n\r\n      this.fadeOut(this.domNodes.image, this.options.fadeSpeed, function () {\r\n        _this4.isAnimating = true;\r\n\r\n        if (!_this4.isClosing) {\r\n          setTimeout(function () {\r\n            var element = _this4.relatedElements[_this4.currentImageIndex];\r\n\r\n            _this4.currentImage.setAttribute('src', element.getAttribute(_this4.options.sourceAttr));\r\n\r\n            if (_this4.loadedImages.indexOf(element.getAttribute(_this4.options.sourceAttr)) === -1) {\r\n              _this4.show(_this4.domNodes.spinner);\r\n            }\r\n\r\n            if (_this4.domNodes.image.contains(_this4.domNodes.caption)) {\r\n              _this4.domNodes.image.removeChild(_this4.domNodes.caption);\r\n            }\r\n\r\n            _this4.adjustImage(slideDirection);\r\n\r\n            if (_this4.options.preloading) _this4.preload();\r\n          }, 100);\r\n        } else {\r\n          _this4.isAnimating = false;\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: \"adjustImage\",\r\n    value: function adjustImage(direction) {\r\n      var _this5 = this;\r\n\r\n      if (!this.currentImage) {\r\n        return false;\r\n      }\r\n\r\n      var tmpImage = new Image(),\r\n          windowWidth = window.innerWidth * this.options.widthRatio,\r\n          windowHeight = window.innerHeight * this.options.heightRatio;\r\n      tmpImage.setAttribute('src', this.currentImage.getAttribute('src'));\r\n      this.currentImage.dataset.scale = 1;\r\n      this.currentImage.dataset.translateX = 0;\r\n      this.currentImage.dataset.translateY = 0;\r\n      this.zoomPanElement(0, 0, 1);\r\n      tmpImage.addEventListener('error', function (event) {\r\n        _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('error.' + _this5.eventNamespace));\r\n\r\n        _this5.isAnimating = false;\r\n        _this5.isOpen = true;\r\n        _this5.domNodes.spinner.style.display = 'none';\r\n        var dirIsDefined = direction === 1 || direction === -1;\r\n\r\n        if (_this5.initialImageIndex === _this5.currentImageIndex && dirIsDefined) {\r\n          return _this5.close();\r\n        }\r\n\r\n        if (_this5.options.alertError) {\r\n          alert(_this5.options.alertErrorMessage);\r\n        }\r\n\r\n        _this5.loadImage(dirIsDefined ? direction : 1);\r\n      });\r\n      tmpImage.addEventListener('load', function (event) {\r\n        if (typeof direction !== 'undefined') {\r\n          _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event('changed.' + _this5.eventNamespace));\r\n\r\n          _this5.relatedElements[_this5.currentImageIndex].dispatchEvent(new Event((direction === 1 ? 'nextDone' : 'prevDone') + '.' + _this5.eventNamespace));\r\n        } // history\r\n\r\n\r\n        if (_this5.options.history) {\r\n          _this5.updateURL();\r\n        }\r\n\r\n        if (_this5.loadedImages.indexOf(_this5.currentImage.getAttribute('src')) === -1) {\r\n          _this5.loadedImages.push(_this5.currentImage.getAttribute('src'));\r\n        }\r\n\r\n        var imageWidth = event.target.width,\r\n            imageHeight = event.target.height;\r\n\r\n        if (_this5.options.scaleImageToRatio || imageWidth > windowWidth || imageHeight > windowHeight) {\r\n          var ratio = imageWidth / imageHeight > windowWidth / windowHeight ? imageWidth / windowWidth : imageHeight / windowHeight;\r\n          imageWidth /= ratio;\r\n          imageHeight /= ratio;\r\n        }\r\n\r\n        _this5.domNodes.image.style.top = (window.innerHeight - imageHeight) / 2 + 'px';\r\n        _this5.domNodes.image.style.left = (window.innerWidth - imageWidth - _this5.globalScrollbarWidth) / 2 + 'px';\r\n        _this5.domNodes.image.style.width = imageWidth + 'px';\r\n        _this5.domNodes.image.style.height = imageHeight + 'px';\r\n        _this5.domNodes.spinner.style.display = 'none';\r\n\r\n        if (_this5.options.focus) {\r\n          _this5.forceFocus();\r\n        }\r\n\r\n        _this5.fadeIn(_this5.currentImage, _this5.options.fadeSpeed, function () {\r\n          if (_this5.options.focus) {\r\n            _this5.domNodes.wrapper.focus();\r\n          }\r\n        });\r\n\r\n        _this5.isOpen = true;\r\n        var captionContainer, captionText;\r\n\r\n        if (typeof _this5.options.captionSelector === 'string') {\r\n          captionContainer = _this5.options.captionSelector === 'self' ? _this5.relatedElements[_this5.currentImageIndex] : _this5.relatedElements[_this5.currentImageIndex].querySelector(_this5.options.captionSelector);\r\n        } else if (typeof _this5.options.captionSelector === 'function') {\r\n          captionContainer = _this5.options.captionSelector(_this5.relatedElements[_this5.currentImageIndex]);\r\n        }\r\n\r\n        if (_this5.options.captions && captionContainer) {\r\n          if (_this5.options.captionType === 'data') {\r\n            captionText = captionContainer.dataset[_this5.options.captionsData];\r\n          } else if (_this5.options.captionType === 'text') {\r\n            captionText = captionContainer.innerHTML;\r\n          } else {\r\n            captionText = captionContainer.getAttribute(_this5.options.captionsData);\r\n          }\r\n        }\r\n\r\n        if (!_this5.options.loop) {\r\n          if (_this5.currentImageIndex === 0) {\r\n            _this5.hide(_this5.domNodes.navigation.querySelector('.sl-prev'));\r\n          }\r\n\r\n          if (_this5.currentImageIndex >= _this5.relatedElements.length - 1) {\r\n            _this5.hide(_this5.domNodes.navigation.querySelector('.sl-next'));\r\n          }\r\n\r\n          if (_this5.currentImageIndex > 0) {\r\n            _this5.show(_this5.domNodes.navigation.querySelector('.sl-prev'));\r\n          }\r\n\r\n          if (_this5.currentImageIndex < _this5.relatedElements.length - 1) {\r\n            _this5.show(_this5.domNodes.navigation.querySelector('.sl-next'));\r\n          }\r\n        } else {\r\n          if (_this5.relatedElements.length === 1) {\r\n            _this5.hide(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\r\n          } else {\r\n            _this5.show(_this5.domNodes.navigation.querySelectorAll('.sl-prev, .sl-next'));\r\n          }\r\n        }\r\n\r\n        if (direction === 1 || direction === -1) {\r\n          if (_this5.options.animationSlide) {\r\n            _this5.slide(0, 100 * direction + 'px');\r\n\r\n            setTimeout(function () {\r\n              _this5.slide(_this5.options.animationSpeed / 1000, 0 + 'px');\r\n            }, 50);\r\n          }\r\n\r\n          _this5.fadeIn(_this5.domNodes.image, _this5.options.fadeSpeed, function () {\r\n            _this5.isAnimating = false;\r\n\r\n            _this5.setCaption(captionText, imageWidth);\r\n          });\r\n        } else {\r\n          _this5.isAnimating = false;\r\n\r\n          _this5.setCaption(captionText, imageWidth);\r\n        }\r\n\r\n        if (_this5.options.additionalHtml && !_this5.domNodes.additionalHtml) {\r\n          _this5.domNodes.additionalHtml = document.createElement('div');\r\n\r\n          _this5.domNodes.additionalHtml.classList.add('sl-additional-html');\r\n\r\n          _this5.domNodes.additionalHtml.innerHTML = _this5.options.additionalHtml;\r\n\r\n          _this5.domNodes.image.appendChild(_this5.domNodes.additionalHtml);\r\n        }\r\n      });\r\n    }\r\n  }, {\r\n    key: \"zoomPanElement\",\r\n    value: function zoomPanElement(targetOffsetX, targetOffsetY, targetScale) {\r\n      this.currentImage.style[this.transitionPrefix + 'transform'] = 'translate(' + targetOffsetX + ',' + targetOffsetY + ') scale(' + targetScale + ')';\r\n    }\r\n  }, {\r\n    key: \"minMax\",\r\n    value: function minMax(value, min, max) {\r\n      return value < min ? min : value > max ? max : value;\r\n    }\r\n  }, {\r\n    key: \"setZoomData\",\r\n    value: function setZoomData(initialScale, targetOffsetX, targetOffsetY) {\r\n      this.currentImage.dataset.scale = initialScale;\r\n      this.currentImage.dataset.translateX = targetOffsetX;\r\n      this.currentImage.dataset.translateY = targetOffsetY;\r\n    }\r\n  }, {\r\n    key: \"hashchangeHandler\",\r\n    value: function hashchangeHandler() {\r\n      if (this.isOpen && this.hash === this.initialLocationHash) {\r\n        this.hashReseted = true;\r\n        this.close();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"addEvents\",\r\n    value: function addEvents() {\r\n      var _this6 = this;\r\n\r\n      // resize/responsive\r\n      this.addEventListener(window, 'resize.' + this.eventNamespace, function (event) {\r\n        //this.adjustImage.bind(this)\r\n        if (_this6.isOpen) {\r\n          _this6.adjustImage();\r\n        }\r\n      });\r\n      this.addEventListener(this.domNodes.closeButton, ['click.' + this.eventNamespace, 'touchstart.' + this.eventNamespace], this.close.bind(this));\r\n\r\n      if (this.options.history) {\r\n        setTimeout(function () {\r\n          _this6.addEventListener(window, 'hashchange.' + _this6.eventNamespace, function (event) {\r\n            if (_this6.isOpen) {\r\n              _this6.hashchangeHandler();\r\n            }\r\n          });\r\n        }, 40);\r\n      }\r\n\r\n      this.addEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace, function (event) {\r\n        if (!event.currentTarget.tagName.match(/button/i)) {\r\n          return true;\r\n        }\r\n\r\n        event.preventDefault();\r\n        _this6.controlCoordinates.swipeDiff = 0;\r\n\r\n        _this6.loadImage(event.currentTarget.classList.contains('sl-next') ? 1 : -1);\r\n      });\r\n\r\n      if (this.options.scrollZoom) {\r\n        var scale = 1;\r\n        this.addEventListener(this.domNodes.image, ['mousewheel', 'DOMMouseScroll'], function (event) {\r\n          if (_this6.controlCoordinates.mousedown || _this6.isAnimating || _this6.isClosing || !_this6.isOpen) {\r\n            return true;\r\n          }\r\n\r\n          if (_this6.controlCoordinates.containerHeight == 0) {\r\n            _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\r\n            _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\r\n            _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\r\n            _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\r\n            _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\r\n            _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\r\n            _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\r\n            _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\r\n          }\r\n\r\n          event.preventDefault();\r\n          var delta = event.delta || event.wheelDelta;\r\n\r\n          if (delta === undefined) {\r\n            //we are on firefox\r\n            delta = event.detail;\r\n          }\r\n\r\n          delta = Math.max(-1, Math.min(1, delta)); // cap the delta to [-1,1] for cross browser consistency\r\n          // apply zoom\r\n\r\n          scale += delta * _this6.options.scrollZoomFactor * scale;\r\n          scale = Math.max(1, Math.min(_this6.options.maxZoom, scale));\r\n          _this6.controlCoordinates.targetScale = scale;\r\n          var scrollTopPos = document.documentElement.scrollTop || document.body.scrollTop;\r\n          _this6.controlCoordinates.pinchOffsetX = event.pageX;\r\n          _this6.controlCoordinates.pinchOffsetY = event.pageY - scrollTopPos || 0; // need to substract the scroll position\r\n\r\n          _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\r\n          _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\r\n          _this6.controlCoordinates.scaleDifference = _this6.controlCoordinates.targetScale - _this6.controlCoordinates.initialScale;\r\n          _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetX - (_this6.controlCoordinates.pinchOffsetX - _this6.controlCoordinates.containerOffsetX - _this6.controlCoordinates.containerWidth / 2 - _this6.controlCoordinates.initialOffsetX) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\r\n          _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetY - (_this6.controlCoordinates.pinchOffsetY - _this6.controlCoordinates.containerOffsetY - _this6.controlCoordinates.containerHeight / 2 - _this6.controlCoordinates.initialOffsetY) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\r\n\r\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\r\n\r\n          if (_this6.controlCoordinates.targetScale > 1) {\r\n            _this6.controlCoordinates.zoomed = true;\r\n\r\n            if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\r\n              _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n            }\r\n          } else {\r\n            if (_this6.controlCoordinates.initialScale === 1) {\r\n              _this6.controlCoordinates.zoomed = false;\r\n\r\n              if (_this6.domNodes.caption.style.display === 'none') {\r\n                _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n              }\r\n            }\r\n\r\n            _this6.controlCoordinates.initialPinchDistance = null;\r\n            _this6.controlCoordinates.capture = false;\r\n          }\r\n\r\n          _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\r\n          _this6.controlCoordinates.initialScale = _this6.controlCoordinates.targetScale;\r\n          _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\r\n          _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\r\n\r\n          _this6.setZoomData(_this6.controlCoordinates.targetScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\r\n\r\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\r\n        });\r\n      }\r\n\r\n      this.addEventListener(this.domNodes.image, ['touchstart.' + this.eventNamespace, 'mousedown.' + this.eventNamespace], function (event) {\r\n        if (event.target.tagName === 'A' && event.type === 'touchstart') {\r\n          return true;\r\n        }\r\n\r\n        if (event.type === 'mousedown') {\r\n          event.preventDefault();\r\n          _this6.controlCoordinates.initialPointerOffsetX = event.clientX;\r\n          _this6.controlCoordinates.initialPointerOffsetY = event.clientY;\r\n          _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\r\n          _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\r\n          _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\r\n          _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\r\n          _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\r\n          _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\r\n          _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\r\n          _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\r\n          _this6.controlCoordinates.capture = true;\r\n        } else {\r\n          _this6.controlCoordinates.touchCount = event.touches.length;\r\n          _this6.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\r\n          _this6.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\r\n          _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\r\n          _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\r\n          _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\r\n          _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\r\n          _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\r\n          _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\r\n\r\n          if (_this6.controlCoordinates.touchCount === 1)\r\n            /* Single touch */\r\n            {\r\n              if (!_this6.controlCoordinates.doubleTapped) {\r\n                _this6.controlCoordinates.doubleTapped = true;\r\n                setTimeout(function () {\r\n                  _this6.controlCoordinates.doubleTapped = false;\r\n                }, 300);\r\n              } else {\r\n                _this6.currentImage.classList.add('sl-transition');\r\n\r\n                if (!_this6.controlCoordinates.zoomed) {\r\n                  _this6.controlCoordinates.initialScale = _this6.options.doubleTapZoom;\r\n\r\n                  _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\r\n\r\n                  _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\r\n\r\n                  if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\r\n                    _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n                  }\r\n\r\n                  _this6.controlCoordinates.zoomed = true;\r\n                } else {\r\n                  _this6.controlCoordinates.initialScale = 1;\r\n\r\n                  _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\r\n\r\n                  _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\r\n\r\n                  _this6.controlCoordinates.zoomed = false;\r\n                }\r\n\r\n                setTimeout(function () {\r\n                  if (_this6.currentImage) {\r\n                    _this6.currentImage.classList.remove('sl-transition');\r\n                  }\r\n                }, 200);\r\n                return false;\r\n              }\r\n\r\n              _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\r\n              _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\r\n            } else if (_this6.controlCoordinates.touchCount === 2)\r\n            /* Pinch */\r\n            {\r\n              _this6.controlCoordinates.initialPointerOffsetX2 = event.touches[1].clientX;\r\n              _this6.controlCoordinates.initialPointerOffsetY2 = event.touches[1].clientY;\r\n              _this6.controlCoordinates.initialOffsetX = parseFloat(_this6.currentImage.dataset.translateX);\r\n              _this6.controlCoordinates.initialOffsetY = parseFloat(_this6.currentImage.dataset.translateY);\r\n              _this6.controlCoordinates.pinchOffsetX = (_this6.controlCoordinates.initialPointerOffsetX + _this6.controlCoordinates.initialPointerOffsetX2) / 2;\r\n              _this6.controlCoordinates.pinchOffsetY = (_this6.controlCoordinates.initialPointerOffsetY + _this6.controlCoordinates.initialPointerOffsetY2) / 2;\r\n              _this6.controlCoordinates.initialPinchDistance = Math.sqrt((_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialPointerOffsetX2) * (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialPointerOffsetX2) + (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialPointerOffsetY2) * (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialPointerOffsetY2));\r\n            }\r\n\r\n          _this6.controlCoordinates.capture = true;\r\n        }\r\n\r\n        if (_this6.controlCoordinates.mousedown) return true;\r\n\r\n        if (_this6.transitionCapable) {\r\n          _this6.controlCoordinates.imageLeft = parseInt(_this6.domNodes.image.style.left, 10);\r\n        }\r\n\r\n        _this6.controlCoordinates.mousedown = true;\r\n        _this6.controlCoordinates.swipeDiff = 0;\r\n        _this6.controlCoordinates.swipeYDiff = 0;\r\n        _this6.controlCoordinates.swipeStart = event.pageX || event.touches[0].pageX;\r\n        _this6.controlCoordinates.swipeYStart = event.pageY || event.touches[0].pageY;\r\n        return false;\r\n      });\r\n      this.addEventListener(this.domNodes.image, ['touchmove.' + this.eventNamespace, 'mousemove.' + this.eventNamespace, 'MSPointerMove'], function (event) {\r\n        if (!_this6.controlCoordinates.mousedown) {\r\n          return true;\r\n        }\r\n\r\n        if (event.type === 'touchmove') {\r\n          if (_this6.controlCoordinates.capture === false) {\r\n            return false;\r\n          }\r\n\r\n          _this6.controlCoordinates.pointerOffsetX = event.touches[0].clientX;\r\n          _this6.controlCoordinates.pointerOffsetY = event.touches[0].clientY;\r\n          _this6.controlCoordinates.touchCount = event.touches.length;\r\n          _this6.controlCoordinates.touchmoveCount++;\r\n\r\n          if (_this6.controlCoordinates.touchCount > 1)\r\n            /* Pinch */\r\n            {\r\n              _this6.controlCoordinates.pointerOffsetX2 = event.touches[1].clientX;\r\n              _this6.controlCoordinates.pointerOffsetY2 = event.touches[1].clientY;\r\n              _this6.controlCoordinates.targetPinchDistance = Math.sqrt((_this6.controlCoordinates.pointerOffsetX - _this6.controlCoordinates.pointerOffsetX2) * (_this6.controlCoordinates.pointerOffsetX - _this6.controlCoordinates.pointerOffsetX2) + (_this6.controlCoordinates.pointerOffsetY - _this6.controlCoordinates.pointerOffsetY2) * (_this6.controlCoordinates.pointerOffsetY - _this6.controlCoordinates.pointerOffsetY2));\r\n\r\n              if (_this6.controlCoordinates.initialPinchDistance === null) {\r\n                _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\r\n              }\r\n\r\n              if (Math.abs(_this6.controlCoordinates.initialPinchDistance - _this6.controlCoordinates.targetPinchDistance) >= 1) {\r\n                /* Initialize helpers */\r\n                _this6.controlCoordinates.targetScale = _this6.minMax(_this6.controlCoordinates.targetPinchDistance / _this6.controlCoordinates.initialPinchDistance * _this6.controlCoordinates.initialScale, 1, _this6.options.maxZoom);\r\n                _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\r\n                _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\r\n                _this6.controlCoordinates.scaleDifference = _this6.controlCoordinates.targetScale - _this6.controlCoordinates.initialScale;\r\n                _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetX - (_this6.controlCoordinates.pinchOffsetX - _this6.controlCoordinates.containerOffsetX - _this6.controlCoordinates.containerWidth / 2 - _this6.controlCoordinates.initialOffsetX) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\r\n                _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.initialOffsetY - (_this6.controlCoordinates.pinchOffsetY - _this6.controlCoordinates.containerOffsetY - _this6.controlCoordinates.containerHeight / 2 - _this6.controlCoordinates.initialOffsetY) / (_this6.controlCoordinates.targetScale - _this6.controlCoordinates.scaleDifference) * _this6.controlCoordinates.scaleDifference, _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\r\n\r\n                _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\r\n\r\n                if (_this6.controlCoordinates.targetScale > 1) {\r\n                  _this6.controlCoordinates.zoomed = true;\r\n\r\n                  if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\r\n                    _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n                  }\r\n                }\r\n\r\n                _this6.controlCoordinates.initialPinchDistance = _this6.controlCoordinates.targetPinchDistance;\r\n                _this6.controlCoordinates.initialScale = _this6.controlCoordinates.targetScale;\r\n                _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\r\n                _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\r\n              }\r\n            } else {\r\n            _this6.controlCoordinates.targetScale = _this6.controlCoordinates.initialScale;\r\n            _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\r\n            _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\r\n            _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetX - (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialOffsetX), _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\r\n            _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetY - (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialOffsetY), _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\r\n\r\n            if (Math.abs(_this6.controlCoordinates.targetOffsetX) === Math.abs(_this6.controlCoordinates.limitOffsetX)) {\r\n              _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\r\n              _this6.controlCoordinates.initialPointerOffsetX = _this6.controlCoordinates.pointerOffsetX;\r\n            }\r\n\r\n            if (Math.abs(_this6.controlCoordinates.targetOffsetY) === Math.abs(_this6.controlCoordinates.limitOffsetY)) {\r\n              _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\r\n              _this6.controlCoordinates.initialPointerOffsetY = _this6.controlCoordinates.pointerOffsetY;\r\n            }\r\n\r\n            _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\r\n\r\n            _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\r\n          }\r\n        }\r\n        /* Mouse Move implementation */\r\n\r\n\r\n        if (event.type === 'mousemove' && _this6.controlCoordinates.mousedown) {\r\n          if (event.type == 'touchmove') return true;\r\n          event.preventDefault();\r\n          if (_this6.controlCoordinates.capture === false) return false;\r\n          _this6.controlCoordinates.pointerOffsetX = event.clientX;\r\n          _this6.controlCoordinates.pointerOffsetY = event.clientY;\r\n          _this6.controlCoordinates.targetScale = _this6.controlCoordinates.initialScale;\r\n          _this6.controlCoordinates.limitOffsetX = (_this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerWidth) / 2;\r\n          _this6.controlCoordinates.limitOffsetY = (_this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale - _this6.controlCoordinates.containerHeight) / 2;\r\n          _this6.controlCoordinates.targetOffsetX = _this6.controlCoordinates.imgWidth * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerWidth ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetX - (_this6.controlCoordinates.initialPointerOffsetX - _this6.controlCoordinates.initialOffsetX), _this6.controlCoordinates.limitOffsetX * -1, _this6.controlCoordinates.limitOffsetX);\r\n          _this6.controlCoordinates.targetOffsetY = _this6.controlCoordinates.imgHeight * _this6.controlCoordinates.targetScale <= _this6.controlCoordinates.containerHeight ? 0 : _this6.minMax(_this6.controlCoordinates.pointerOffsetY - (_this6.controlCoordinates.initialPointerOffsetY - _this6.controlCoordinates.initialOffsetY), _this6.controlCoordinates.limitOffsetY * -1, _this6.controlCoordinates.limitOffsetY);\r\n\r\n          if (Math.abs(_this6.controlCoordinates.targetOffsetX) === Math.abs(_this6.controlCoordinates.limitOffsetX)) {\r\n            _this6.controlCoordinates.initialOffsetX = _this6.controlCoordinates.targetOffsetX;\r\n            _this6.controlCoordinates.initialPointerOffsetX = _this6.controlCoordinates.pointerOffsetX;\r\n          }\r\n\r\n          if (Math.abs(_this6.controlCoordinates.targetOffsetY) === Math.abs(_this6.controlCoordinates.limitOffsetY)) {\r\n            _this6.controlCoordinates.initialOffsetY = _this6.controlCoordinates.targetOffsetY;\r\n            _this6.controlCoordinates.initialPointerOffsetY = _this6.controlCoordinates.pointerOffsetY;\r\n          }\r\n\r\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\r\n\r\n          _this6.zoomPanElement(_this6.controlCoordinates.targetOffsetX + \"px\", _this6.controlCoordinates.targetOffsetY + \"px\", _this6.controlCoordinates.targetScale);\r\n        }\r\n\r\n        if (!_this6.controlCoordinates.zoomed) {\r\n          _this6.controlCoordinates.swipeEnd = event.pageX || event.touches[0].pageX;\r\n          _this6.controlCoordinates.swipeYEnd = event.pageY || event.touches[0].pageY;\r\n          _this6.controlCoordinates.swipeDiff = _this6.controlCoordinates.swipeStart - _this6.controlCoordinates.swipeEnd;\r\n          _this6.controlCoordinates.swipeYDiff = _this6.controlCoordinates.swipeYStart - _this6.controlCoordinates.swipeYEnd;\r\n\r\n          if (_this6.options.animationSlide) {\r\n            _this6.slide(0, -_this6.controlCoordinates.swipeDiff + 'px');\r\n          }\r\n        }\r\n      });\r\n      this.addEventListener(this.domNodes.image, ['touchend.' + this.eventNamespace, 'mouseup.' + this.eventNamespace, 'touchcancel.' + this.eventNamespace, 'mouseleave.' + this.eventNamespace, 'pointerup', 'pointercancel', 'MSPointerUp', 'MSPointerCancel'], function (event) {\r\n        if (_this6.isTouchDevice && event.type === 'touchend') {\r\n          _this6.controlCoordinates.touchCount = event.touches.length;\r\n\r\n          if (_this6.controlCoordinates.touchCount === 0)\r\n            /* No touch */\r\n            {\r\n              /* Set attributes */\r\n              if (_this6.currentImage) {\r\n                _this6.setZoomData(_this6.controlCoordinates.initialScale, _this6.controlCoordinates.targetOffsetX, _this6.controlCoordinates.targetOffsetY);\r\n              }\r\n\r\n              if (_this6.controlCoordinates.initialScale === 1) {\r\n                _this6.controlCoordinates.zoomed = false;\r\n\r\n                if (_this6.domNodes.caption.style.display === 'none') {\r\n                  _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n                }\r\n              }\r\n\r\n              _this6.controlCoordinates.initialPinchDistance = null;\r\n              _this6.controlCoordinates.capture = false;\r\n            } else if (_this6.controlCoordinates.touchCount === 1)\r\n            /* Single touch */\r\n            {\r\n              _this6.controlCoordinates.initialPointerOffsetX = event.touches[0].clientX;\r\n              _this6.controlCoordinates.initialPointerOffsetY = event.touches[0].clientY;\r\n            } else if (_this6.controlCoordinates.touchCount > 1)\r\n            /* Pinch */\r\n            {\r\n              _this6.controlCoordinates.initialPinchDistance = null;\r\n            }\r\n        }\r\n\r\n        if (_this6.controlCoordinates.mousedown) {\r\n          _this6.controlCoordinates.mousedown = false;\r\n          var possibleDir = true;\r\n\r\n          if (!_this6.options.loop) {\r\n            if (_this6.currentImageIndex === 0 && _this6.controlCoordinates.swipeDiff < 0) {\r\n              possibleDir = false;\r\n            }\r\n\r\n            if (_this6.currentImageIndex >= _this6.relatedElements.length - 1 && _this6.controlCoordinates.swipeDiff > 0) {\r\n              possibleDir = false;\r\n            }\r\n          }\r\n\r\n          if (Math.abs(_this6.controlCoordinates.swipeDiff) > _this6.options.swipeTolerance && possibleDir) {\r\n            _this6.loadImage(_this6.controlCoordinates.swipeDiff > 0 ? 1 : -1);\r\n          } else if (_this6.options.animationSlide) {\r\n            _this6.slide(_this6.options.animationSpeed / 1000, 0 + 'px');\r\n          }\r\n\r\n          if (_this6.options.swipeClose && Math.abs(_this6.controlCoordinates.swipeYDiff) > 50 && Math.abs(_this6.controlCoordinates.swipeDiff) < _this6.options.swipeTolerance) {\r\n            _this6.close();\r\n          }\r\n        }\r\n      });\r\n      this.addEventListener(this.domNodes.image, ['dblclick'], function (event) {\r\n        if (_this6.isTouchDevice) return;\r\n        _this6.controlCoordinates.initialPointerOffsetX = event.clientX;\r\n        _this6.controlCoordinates.initialPointerOffsetY = event.clientY;\r\n        _this6.controlCoordinates.containerHeight = _this6.getDimensions(_this6.domNodes.image).height;\r\n        _this6.controlCoordinates.containerWidth = _this6.getDimensions(_this6.domNodes.image).width;\r\n        _this6.controlCoordinates.imgHeight = _this6.getDimensions(_this6.currentImage).height;\r\n        _this6.controlCoordinates.imgWidth = _this6.getDimensions(_this6.currentImage).width;\r\n        _this6.controlCoordinates.containerOffsetX = _this6.domNodes.image.offsetLeft;\r\n        _this6.controlCoordinates.containerOffsetY = _this6.domNodes.image.offsetTop;\r\n\r\n        _this6.currentImage.classList.add('sl-transition');\r\n\r\n        if (!_this6.controlCoordinates.zoomed) {\r\n          _this6.controlCoordinates.initialScale = _this6.options.doubleTapZoom;\r\n\r\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\r\n\r\n          _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\r\n\r\n          if ((!_this6.domNodes.caption.style.opacity || _this6.domNodes.caption.style.opacity > 0) && _this6.domNodes.caption.style.display !== 'none') {\r\n            _this6.fadeOut(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n          }\r\n\r\n          _this6.controlCoordinates.zoomed = true;\r\n        } else {\r\n          _this6.controlCoordinates.initialScale = 1;\r\n\r\n          _this6.setZoomData(_this6.controlCoordinates.initialScale, 0, 0);\r\n\r\n          _this6.zoomPanElement(0 + \"px\", 0 + \"px\", _this6.controlCoordinates.initialScale);\r\n\r\n          _this6.controlCoordinates.zoomed = false;\r\n\r\n          if (_this6.domNodes.caption.style.display === 'none') {\r\n            _this6.fadeIn(_this6.domNodes.caption, _this6.options.fadeSpeed);\r\n          }\r\n        }\r\n\r\n        setTimeout(function () {\r\n          if (_this6.currentImage) {\r\n            _this6.currentImage.classList.remove('sl-transition');\r\n\r\n            _this6.currentImage.style[_this6.transitionPrefix + 'transform-origin'] = null;\r\n          }\r\n        }, 200);\r\n        _this6.controlCoordinates.capture = true;\r\n        return false;\r\n      });\r\n    }\r\n  }, {\r\n    key: \"getDimensions\",\r\n    value: function getDimensions(element) {\r\n      var styles = window.getComputedStyle(element),\r\n          height = element.offsetHeight,\r\n          width = element.offsetWidth,\r\n          borderTopWidth = parseFloat(styles.borderTopWidth),\r\n          borderBottomWidth = parseFloat(styles.borderBottomWidth),\r\n          paddingTop = parseFloat(styles.paddingTop),\r\n          paddingBottom = parseFloat(styles.paddingBottom),\r\n          borderLeftWidth = parseFloat(styles.borderLeftWidth),\r\n          borderRightWidth = parseFloat(styles.borderRightWidth),\r\n          paddingLeft = parseFloat(styles.paddingLeft),\r\n          paddingRight = parseFloat(styles.paddingRight);\r\n      return {\r\n        height: height - borderBottomWidth - borderTopWidth - paddingTop - paddingBottom,\r\n        width: width - borderLeftWidth - borderRightWidth - paddingLeft - paddingRight\r\n      };\r\n    }\r\n  }, {\r\n    key: \"updateHash\",\r\n    value: function updateHash() {\r\n      var newHash = 'pid=' + (this.currentImageIndex + 1),\r\n          newURL = window.location.href.split('#')[0] + '#' + newHash;\r\n      this.hashReseted = false;\r\n\r\n      if (this.pushStateSupport) {\r\n        window.history[this.historyHasChanges ? 'replaceState' : 'pushState']('', document.title, newURL);\r\n      } else {\r\n        // what is the browser target of this?\r\n        if (this.historyHasChanges) {\r\n          window.location.replace(newURL);\r\n        } else {\r\n          window.location.hash = newHash;\r\n        }\r\n      }\r\n\r\n      if (!this.historyHasChanges) {\r\n        this.urlChangedOnce = true;\r\n      }\r\n\r\n      this.historyHasChanges = true;\r\n    }\r\n  }, {\r\n    key: \"resetHash\",\r\n    value: function resetHash() {\r\n      this.hashReseted = true;\r\n\r\n      if (this.urlChangedOnce) {\r\n        history.back();\r\n      } else {\r\n        if (this.pushStateSupport) {\r\n          history.pushState('', document.title, window.location.pathname + window.location.search);\r\n        } else {\r\n          window.location.hash = '';\r\n        }\r\n      } //\r\n      //in case an history operation is still pending\r\n\r\n\r\n      clearTimeout(this.historyUpdateTimeout);\r\n    }\r\n  }, {\r\n    key: \"updateURL\",\r\n    value: function updateURL() {\r\n      clearTimeout(this.historyUpdateTimeout);\r\n\r\n      if (!this.historyHasChanges) {\r\n        this.updateHash(); // first time\r\n      } else {\r\n        this.historyUpdateTimeout = setTimeout(this.updateHash.bind(this), 800);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"setCaption\",\r\n    value: function setCaption(captionText, imageWidth) {\r\n      var _this7 = this;\r\n\r\n      if (this.options.captions && captionText && captionText !== '' && typeof captionText !== \"undefined\") {\r\n        this.hide(this.domNodes.caption);\r\n        this.domNodes.caption.style.width = imageWidth + 'px';\r\n        this.domNodes.caption.innerHTML = captionText;\r\n        this.domNodes.image.appendChild(this.domNodes.caption);\r\n        setTimeout(function () {\r\n          _this7.fadeIn(_this7.domNodes.caption, _this7.options.fadeSpeed);\r\n        }, this.options.captionDelay);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"slide\",\r\n    value: function slide(speed, pos) {\r\n      if (!this.transitionCapable) {\r\n        return this.domNodes.image.style.left = pos;\r\n      }\r\n\r\n      this.domNodes.image.style[this.transitionPrefix + 'transform'] = 'translateX(' + pos + ')';\r\n      this.domNodes.image.style[this.transitionPrefix + 'transition'] = this.transitionPrefix + 'transform ' + speed + 's linear';\r\n    }\r\n  }, {\r\n    key: \"getRelated\",\r\n    value: function getRelated(rel) {\r\n      var elems;\r\n\r\n      if (rel && rel !== false && rel !== 'nofollow') {\r\n        elems = Array.from(this.elements).filter(function (element) {\r\n          return element.getAttribute('rel') === rel;\r\n        });\r\n      } else {\r\n        elems = this.elements;\r\n      }\r\n\r\n      return elems;\r\n    }\r\n  }, {\r\n    key: \"openImage\",\r\n    value: function openImage(element) {\r\n      var _this8 = this;\r\n\r\n      element.dispatchEvent(new Event('show.' + this.eventNamespace));\r\n\r\n      if (this.options.disableScroll) {\r\n        this.globalScrollbarWidth = this.toggleScrollbar('hide');\r\n      }\r\n\r\n      if (this.options.htmlClass && this.options.htmlClass !== '') {\r\n        document.querySelector('html').classList.add(this.options.htmlClass);\r\n      }\r\n\r\n      document.body.appendChild(this.domNodes.wrapper);\r\n      this.domNodes.wrapper.appendChild(this.domNodes.image);\r\n\r\n      if (this.options.overlay) {\r\n        document.body.appendChild(this.domNodes.overlay);\r\n      }\r\n\r\n      this.relatedElements = this.getRelated(element.rel);\r\n\r\n      if (this.options.showCounter) {\r\n        if (this.relatedElements.length == 1 && this.domNodes.wrapper.contains(this.domNodes.counter)) {\r\n          this.domNodes.wrapper.removeChild(this.domNodes.counter);\r\n        } else if (this.relatedElements.length > 1 && !this.domNodes.wrapper.contains(this.domNodes.counter)) {\r\n          this.domNodes.wrapper.appendChild(this.domNodes.counter);\r\n        }\r\n      }\r\n\r\n      this.isAnimating = true;\r\n      this.currentImageIndex = this.relatedElements.indexOf(element);\r\n      var targetURL = element.getAttribute(this.options.sourceAttr);\r\n      this.currentImage = document.createElement('img');\r\n      this.currentImage.style.display = 'none';\r\n      this.currentImage.setAttribute('src', targetURL);\r\n      this.currentImage.dataset.scale = 1;\r\n      this.currentImage.dataset.translateX = 0;\r\n      this.currentImage.dataset.translateY = 0;\r\n\r\n      if (this.loadedImages.indexOf(targetURL) === -1) {\r\n        this.loadedImages.push(targetURL);\r\n      }\r\n\r\n      this.domNodes.image.innerHTML = '';\r\n      this.domNodes.image.setAttribute('style', '');\r\n      this.domNodes.image.appendChild(this.currentImage);\r\n      this.fadeIn(this.domNodes.overlay, this.options.fadeSpeed);\r\n      this.fadeIn([this.domNodes.counter, this.domNodes.navigation, this.domNodes.closeButton], this.options.fadeSpeed);\r\n      this.show(this.domNodes.spinner);\r\n      this.domNodes.counter.querySelector('.sl-current').innerHTML = this.currentImageIndex + 1;\r\n      this.domNodes.counter.querySelector('.sl-total').innerHTML = this.relatedElements.length;\r\n      this.adjustImage();\r\n\r\n      if (this.options.preloading) {\r\n        this.preload();\r\n      }\r\n\r\n      setTimeout(function () {\r\n        element.dispatchEvent(new Event('shown.' + _this8.eventNamespace));\r\n      }, this.options.animationSpeed);\r\n    }\r\n  }, {\r\n    key: \"forceFocus\",\r\n    value: function forceFocus() {\r\n      var _this9 = this;\r\n\r\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\r\n      this.addEventListener(document, 'focusin.' + this.eventNamespace, function (event) {\r\n        if (document !== event.target && _this9.domNodes.wrapper !== event.target && !_this9.domNodes.wrapper.contains(event.target)) {\r\n          _this9.domNodes.wrapper.focus();\r\n        }\r\n      });\r\n    } // utility\r\n\r\n  }, {\r\n    key: \"addEventListener\",\r\n    value: function addEventListener(elements, events, callback, opts) {\r\n      elements = this.wrap(elements);\r\n      events = this.wrap(events);\r\n\r\n      var _iterator = _createForOfIteratorHelper(elements),\r\n          _step;\r\n\r\n      try {\r\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\r\n          var element = _step.value;\r\n\r\n          if (!element.namespaces) {\r\n            element.namespaces = {};\r\n          } // save the namespaces addEventListener the DOM element itself\r\n\r\n\r\n          var _iterator2 = _createForOfIteratorHelper(events),\r\n              _step2;\r\n\r\n          try {\r\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\r\n              var event = _step2.value;\r\n              var options = opts || false;\r\n              var needsPassiveFix = ['touchstart', 'touchmove'].indexOf(event.split('.')[0]) >= 0;\r\n\r\n              if (needsPassiveFix && this.isPassiveEventsSupported) {\r\n                if (_typeof(options) === 'object') {\r\n                  options.passive = true;\r\n                } else {\r\n                  options = {\r\n                    passive: true\r\n                  };\r\n                }\r\n              }\r\n\r\n              element.namespaces[event] = callback;\r\n              element.addEventListener(event.split('.')[0], callback, options);\r\n            }\r\n          } catch (err) {\r\n            _iterator2.e(err);\r\n          } finally {\r\n            _iterator2.f();\r\n          }\r\n        }\r\n      } catch (err) {\r\n        _iterator.e(err);\r\n      } finally {\r\n        _iterator.f();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"removeEventListener\",\r\n    value: function removeEventListener(elements, events) {\r\n      elements = this.wrap(elements);\r\n      events = this.wrap(events);\r\n\r\n      var _iterator3 = _createForOfIteratorHelper(elements),\r\n          _step3;\r\n\r\n      try {\r\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\r\n          var element = _step3.value;\r\n\r\n          var _iterator4 = _createForOfIteratorHelper(events),\r\n              _step4;\r\n\r\n          try {\r\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\r\n              var event = _step4.value;\r\n\r\n              if (element.namespaces && element.namespaces[event]) {\r\n                element.removeEventListener(event.split('.')[0], element.namespaces[event]);\r\n                delete element.namespaces[event];\r\n              }\r\n            }\r\n          } catch (err) {\r\n            _iterator4.e(err);\r\n          } finally {\r\n            _iterator4.f();\r\n          }\r\n        }\r\n      } catch (err) {\r\n        _iterator3.e(err);\r\n      } finally {\r\n        _iterator3.f();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"fadeOut\",\r\n    value: function fadeOut(elements, duration, callback) {\r\n      var _this10 = this;\r\n\r\n      elements = this.wrap(elements);\r\n\r\n      var _iterator5 = _createForOfIteratorHelper(elements),\r\n          _step5;\r\n\r\n      try {\r\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\r\n          var element = _step5.value;\r\n          element.style.opacity = parseFloat(element) || window.getComputedStyle(element).getPropertyValue(\"opacity\");\r\n        }\r\n      } catch (err) {\r\n        _iterator5.e(err);\r\n      } finally {\r\n        _iterator5.f();\r\n      }\r\n\r\n      this.isFadeIn = false;\r\n\r\n      var step = 16.66666 / (duration || this.options.fadeSpeed),\r\n          fade = function fade() {\r\n        var currentOpacity = parseFloat(elements[0].style.opacity);\r\n\r\n        if ((currentOpacity -= step) < 0) {\r\n          var _iterator6 = _createForOfIteratorHelper(elements),\r\n              _step6;\r\n\r\n          try {\r\n            for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\r\n              var element = _step6.value;\r\n              element.style.display = \"none\"; // element.style.opacity = '';\r\n\r\n              element.style.opacity = 1;\r\n            }\r\n          } catch (err) {\r\n            _iterator6.e(err);\r\n          } finally {\r\n            _iterator6.f();\r\n          }\r\n\r\n          callback && callback.call(_this10, elements);\r\n        } else {\r\n          var _iterator7 = _createForOfIteratorHelper(elements),\r\n              _step7;\r\n\r\n          try {\r\n            for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\r\n              var _element = _step7.value;\r\n              _element.style.opacity = currentOpacity;\r\n            }\r\n          } catch (err) {\r\n            _iterator7.e(err);\r\n          } finally {\r\n            _iterator7.f();\r\n          }\r\n\r\n          requestAnimationFrame(fade);\r\n        }\r\n      };\r\n\r\n      fade();\r\n    }\r\n  }, {\r\n    key: \"fadeIn\",\r\n    value: function fadeIn(elements, duration, callback, display) {\r\n      var _this11 = this;\r\n\r\n      elements = this.wrap(elements);\r\n\r\n      var _iterator8 = _createForOfIteratorHelper(elements),\r\n          _step8;\r\n\r\n      try {\r\n        for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\r\n          var element = _step8.value;\r\n          element.style.opacity = 0;\r\n          element.style.display = display || \"block\";\r\n        }\r\n      } catch (err) {\r\n        _iterator8.e(err);\r\n      } finally {\r\n        _iterator8.f();\r\n      }\r\n\r\n      this.isFadeIn = true;\r\n\r\n      var opacityTarget = parseFloat(elements[0].dataset.opacityTarget || 1),\r\n          step = 16.66666 * opacityTarget / (duration || this.options.fadeSpeed),\r\n          fade = function fade() {\r\n        var currentOpacity = parseFloat(elements[0].style.opacity);\r\n\r\n        if (!((currentOpacity += step) > opacityTarget)) {\r\n          var _iterator9 = _createForOfIteratorHelper(elements),\r\n              _step9;\r\n\r\n          try {\r\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\r\n              var element = _step9.value;\r\n              element.style.opacity = currentOpacity;\r\n            }\r\n          } catch (err) {\r\n            _iterator9.e(err);\r\n          } finally {\r\n            _iterator9.f();\r\n          }\r\n\r\n          if (!_this11.isFadeIn) return;\r\n          requestAnimationFrame(fade);\r\n        } else {\r\n          var _iterator10 = _createForOfIteratorHelper(elements),\r\n              _step10;\r\n\r\n          try {\r\n            for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\r\n              var _element2 = _step10.value;\r\n              _element2.style.opacity = opacityTarget;\r\n            }\r\n          } catch (err) {\r\n            _iterator10.e(err);\r\n          } finally {\r\n            _iterator10.f();\r\n          }\r\n\r\n          callback && callback.call(_this11, elements);\r\n        }\r\n      };\r\n\r\n      fade();\r\n    }\r\n  }, {\r\n    key: \"hide\",\r\n    value: function hide(elements) {\r\n      elements = this.wrap(elements);\r\n\r\n      var _iterator11 = _createForOfIteratorHelper(elements),\r\n          _step11;\r\n\r\n      try {\r\n        for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\r\n          var element = _step11.value;\r\n\r\n          if (element.style.display != 'none') {\r\n            element.dataset.initialDisplay = element.style.display;\r\n          }\r\n\r\n          element.style.display = 'none';\r\n        }\r\n      } catch (err) {\r\n        _iterator11.e(err);\r\n      } finally {\r\n        _iterator11.f();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"show\",\r\n    value: function show(elements, display) {\r\n      elements = this.wrap(elements);\r\n\r\n      var _iterator12 = _createForOfIteratorHelper(elements),\r\n          _step12;\r\n\r\n      try {\r\n        for (_iterator12.s(); !(_step12 = _iterator12.n()).done;) {\r\n          var element = _step12.value;\r\n          element.style.display = element.dataset.initialDisplay || display || 'block';\r\n        }\r\n      } catch (err) {\r\n        _iterator12.e(err);\r\n      } finally {\r\n        _iterator12.f();\r\n      }\r\n    }\r\n  }, {\r\n    key: \"wrap\",\r\n    value: function wrap(input) {\r\n      return typeof input[Symbol.iterator] === 'function' && typeof input !== 'string' ? input : [input];\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function on(events, callback) {\r\n      events = this.wrap(events);\r\n\r\n      var _iterator13 = _createForOfIteratorHelper(this.elements),\r\n          _step13;\r\n\r\n      try {\r\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\r\n          var element = _step13.value;\r\n\r\n          if (!element.fullyNamespacedEvents) {\r\n            element.fullyNamespacedEvents = {};\r\n          }\r\n\r\n          var _iterator14 = _createForOfIteratorHelper(events),\r\n              _step14;\r\n\r\n          try {\r\n            for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\r\n              var event = _step14.value;\r\n              element.fullyNamespacedEvents[event] = callback;\r\n              element.addEventListener(event, callback);\r\n            }\r\n          } catch (err) {\r\n            _iterator14.e(err);\r\n          } finally {\r\n            _iterator14.f();\r\n          }\r\n        }\r\n      } catch (err) {\r\n        _iterator13.e(err);\r\n      } finally {\r\n        _iterator13.f();\r\n      }\r\n\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(events) {\r\n      events = this.wrap(events);\r\n\r\n      var _iterator15 = _createForOfIteratorHelper(this.elements),\r\n          _step15;\r\n\r\n      try {\r\n        for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\r\n          var element = _step15.value;\r\n\r\n          var _iterator16 = _createForOfIteratorHelper(events),\r\n              _step16;\r\n\r\n          try {\r\n            for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\r\n              var event = _step16.value;\r\n\r\n              if (typeof element.fullyNamespacedEvents !== 'undefined' && event in element.fullyNamespacedEvents) {\r\n                element.removeEventListener(event, element.fullyNamespacedEvents[event]);\r\n              }\r\n            }\r\n          } catch (err) {\r\n            _iterator16.e(err);\r\n          } finally {\r\n            _iterator16.f();\r\n          }\r\n        }\r\n      } catch (err) {\r\n        _iterator15.e(err);\r\n      } finally {\r\n        _iterator15.f();\r\n      }\r\n\r\n      return this;\r\n    } // api\r\n\r\n  }, {\r\n    key: \"open\",\r\n    value: function open(elem) {\r\n      elem = elem || this.elements[0];\r\n\r\n      if (typeof jQuery !== \"undefined\" && elem instanceof jQuery) {\r\n        elem = elem.get(0);\r\n      }\r\n\r\n      this.initialImageIndex = this.elements.indexOf(elem);\r\n\r\n      if (this.initialImageIndex > -1) {\r\n        this.openImage(elem);\r\n      }\r\n    }\r\n  }, {\r\n    key: \"next\",\r\n    value: function next() {\r\n      this.loadImage(1);\r\n    }\r\n  }, {\r\n    key: \"prev\",\r\n    value: function prev() {\r\n      this.loadImage(-1);\r\n    } // get some useful data\r\n\r\n  }, {\r\n    key: \"getLighboxData\",\r\n    value: function getLighboxData() {\r\n      return {\r\n        currentImageIndex: this.currentImageIndex,\r\n        currentImage: this.currentImage,\r\n        globalScrollbarWidth: this.globalScrollbarWidth\r\n      };\r\n    } //close is exposed anyways..\r\n\r\n  }, {\r\n    key: \"destroy\",\r\n    value: function destroy() {\r\n      //remove all custom event listeners from elements\r\n      this.off(['close.' + this.eventNamespace, 'closed.' + this.eventNamespace, 'nextImageLoaded.' + this.eventNamespace, 'prevImageLoaded.' + this.eventNamespace, 'change.' + this.eventNamespace, 'nextDone.' + this.eventNamespace, 'prevDone.' + this.eventNamespace, 'error.' + this.eventNamespace, 'changed.' + this.eventNamespace, 'next.' + this.eventNamespace, 'prev.' + this.eventNamespace, 'show.' + this.eventNamespace, 'shown.' + this.eventNamespace]);\r\n      this.removeEventListener(this.elements, 'click.' + this.eventNamespace);\r\n      this.removeEventListener(document, 'focusin.' + this.eventNamespace);\r\n      this.removeEventListener(document.body, 'contextmenu.' + this.eventNamespace);\r\n      this.removeEventListener(document.body, 'keyup.' + this.eventNamespace);\r\n      this.removeEventListener(this.domNodes.navigation.getElementsByTagName('button'), 'click.' + this.eventNamespace);\r\n      this.removeEventListener(this.domNodes.closeButton, 'click.' + this.eventNamespace);\r\n      this.removeEventListener(window, 'resize.' + this.eventNamespace);\r\n      this.removeEventListener(window, 'hashchange.' + this.eventNamespace);\r\n      this.close();\r\n\r\n      if (this.isOpen) {\r\n        document.body.removeChild(this.domNodes.wrapper);\r\n        document.body.removeChild(this.domNodes.overlay);\r\n      }\r\n\r\n      this.elements = null;\r\n    }\r\n  }, {\r\n    key: \"refresh\",\r\n    value: function refresh() {\r\n      if (!this.initialSelector) {\r\n        throw 'refreshing only works when you initialize using a selector!';\r\n      }\r\n\r\n      var options = this.options,\r\n          selector = this.initialSelector;\r\n      this.destroy();\r\n      this.constructor(selector, options);\r\n      return this;\r\n    }\r\n  }]);\r\n\r\n  return SimpleLightbox;\r\n}();\r\n\r\nvar _default = SimpleLightbox;\r\nexports[\"default\"] = _default;\r\nglobal.SimpleLightbox = SimpleLightbox;"]},"metadata":{},"sourceType":"script"}